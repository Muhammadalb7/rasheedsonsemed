<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Your trusted online pharmacy for medicine delivery, healthcare products, and medical consultations" />
  <title>Rasheed Sons EMED - Online Pharmacy</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <style>
    /* Reset and base styles */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f4f9f9;
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    a {
      color: #0288d1;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }

    /* Header/Nav */
    header {
      background-color: #00bfa5;
      color: white;
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    header h1 {
      font-weight: 700;
      font-size: 1.5rem;
      cursor: default;
    }
    nav {
      display: flex;
      gap: 1.5rem;
      font-weight: 600;
      align-items: center;
    }
    nav button, nav a {
      background: none;
      border: none;
      cursor: pointer;
      color: white;
      font-size: 1rem;
      transition: color 0.3s ease;
    }
    nav button:hover, nav a:hover {
      color: #00695c;
    }
    
    /* Mobile menu */
    #mobile-menu-button {
      display: none;
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }
    
    /* Topbar section */
    .topbar {
      background-color: #004d40;
      color: white;
      padding: 0.5rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.85rem;
    }
    .topbar-contact {
      display: flex;
      gap: 1.5rem;
    }
    .topbar-contact a {
      color: white;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    .topbar-contact a:hover {
      text-decoration: underline;
    }
    .topbar-features {
      display: flex;
      gap: 1.5rem;
    }
    .topbar-features span {
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    /* Hero section */
    #hero {
      background: linear-gradient(90deg, #00bfa5cc, #004d40cc), url('https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1470&q=80') no-repeat center/cover;
      color: white;
      text-align: center;
      padding: 4rem 1rem 5rem;
      position: relative;
    }
    #hero h2 {
      font-size: 2.75rem;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.45);
    }
    #hero p {
      font-size: 1.2rem;
      margin-bottom: 2.5rem;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.35);
    }
    #search-form {
      max-width: 500px;
      margin: 0 auto;
      display: flex;
    }
    #search-input {
      flex-grow: 1;
      padding: 0.75rem 1rem;
      border: none;
      border-radius: 4px 0 0 4px;
      font-size: 1rem;
      outline: none;
    }
    #search-button {
      background-color: #004d40;
      color: white;
      padding: 0 1.2rem;
      border: none;
      border-radius: 0 4px 4px 0;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #search-button:hover {
      background-color: #00251a;
    }

    /* Main content area */
    main {
      flex-grow: 1;
      padding: 2rem 1rem;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }
    .section-title {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      color: #00796b;
      border-bottom: 3px solid #00bfa5;
      display: inline-block;
      padding-bottom: 0.3rem;
    }
    
    /* Categories section */
    #categories-section {
      margin-top: 3rem;
    }
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1.5rem;
    }
    .category-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 3px 10px rgb(0 0 0 / 0.1);
      text-align: center;
      padding: 1.5rem 1rem;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }
    .category-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 15px rgb(0 0 0 / 0.15);
    }
    .category-icon {
      font-size: 2.5rem;
      color: #00bfa5;
      margin-bottom: 1rem;
    }
    .category-name {
      font-weight: 600;
      color: #333;
    }

    /* Product grid */
    #product-list {
      display: grid;
      grid-template-columns: repeat(auto-fill,minmax(230px,1fr));
      gap: 1.5rem;
    }
    .product-card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .product-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    
    .product-info {
      padding: 15px;
    }
    
    .product-info h3 {
      margin-top: 0;
      color: #333;
      font-size: 1.1rem;
    }
    
    .product-info p {
      color: #666;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    
    .product-price {
      font-weight: bold;
      color: #00796b;
      font-size: 1.1rem !important;
      margin-bottom: 15px !important;
    }
    
    /* Product quantity controls styles */
    .product-quantity-controls {
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    
    .product-quantity-controls label {
      font-size: 0.9rem;
      color: #555;
      font-weight: 600;
    }
    
    .quantity-selector {
      display: flex;
      align-items: center;
      max-width: 120px;
      height: 36px;
      border: 1px solid #ddd;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .qty-btn {
      width: 36px;
      height: 36px;
      background-color: #f0f0f0;
      border: none;
      font-size: 1.2rem;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.2s;
    }
    
    .qty-btn:hover {
      background-color: #e0e0e0;
    }
    
    .qty-input {
      flex: 1;
      height: 36px;
      text-align: center;
      border: none;
      border-left: 1px solid #ddd;
      border-right: 1px solid #ddd;
      font-size: 0.9rem;
      padding: 0;
    }
    
    .qty-input::-webkit-inner-spin-button, 
    .qty-input::-webkit-outer-spin-button { 
      -webkit-appearance: none;
      margin: 0;
    }
    
    .qty-input {
      -moz-appearance: textfield;
    }
    
    .add-to-cart-button {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      width: 100%;
      transition: background-color 0.3s;
    }
    
    .add-to-cart-button:hover {
      background-color: #00635a;
    }
    
    /* Benefits section */
    .benefits-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }
    .benefit-card {
      background: white;
      border-radius: 8px;
      padding: 1.5rem;
      box-shadow: 0 3px 10px rgb(0 0 0 / 0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .benefit-icon {
      font-size: 2.5rem;
      color: #00bfa5;
      margin-bottom: 1rem;
    }
    .benefit-title {
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }
    .benefit-description {
      color: #555;
      font-size: 0.95rem;
    }

    /* Cart styles */
    #cart-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0,0,0,0.6);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      padding: 1rem;
    }
    #cart {
      background: white;
      border-radius: 10px;
      max-width: 500px;
      width: 100%;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 6px 20px rgb(0 0 0 / 0.3);
    }
    #cart header {
      background-color: #00bfa5;
      color: white;
      padding: 1rem 1.5rem;
      font-weight: 700;
      font-size: 1.3rem;
      display: flex;
      justify-content: space-between;
      cursor: default;
    }
    #cart header button {
      background: none;
      border: none;
      color: white;
      font-weight: 700;
      font-size: 1.5rem;
      cursor: pointer;
      line-height: 1;
      padding: 0;
    }
    #cart-items {
      flex-grow: 1;
      overflow-y: auto;
      padding: 1rem 1.5rem;
    }
    .cart-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid #ccc;
      padding-bottom: 0.5rem;
    }
    .cart-item img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 6px;
      flex-shrink: 0;
    }
    .cart-item-details {
      flex-grow: 1;
    }
    .cart-item-details h4 {
      margin: 0 0 0.3rem;
      font-size: 1.1rem;
    }
    .cart-item-details p {
      margin: 0;
      font-size: 0.9rem;
      color: #555;
    }
    .cart-item-qty {
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    .cart-item-qty button {
      padding: 0.15rem 0.6rem;
      font-weight: 700;
      background-color: #00bfa5;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .cart-item-qty button:hover {
      background-color: #00796b;
    }
    .cart-item-qty span {
      min-width: 20px;
      text-align: center;
      display: inline-block;
    }

    #checkout-section {
      padding: 1rem 1.5rem;
      border-top: 1px solid #eee;
    }
    #total-price {
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 0.8rem;
    }
    #checkout-button {
      width: 100%;
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.75rem 0;
      font-size: 1.1rem;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #checkout-button:hover {
      background-color: #004d40;
    }

    /* Modal and overlay for login/register */
    #user-modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 3000;
      padding: 1rem;
    }
    #user-modal {
      background: white;
      max-width: 400px;
      width: 100%;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgb(0 0 0 / 0.3);
      padding: 2rem 2.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      position: relative;
    }
    #user-modal h3 {
      margin: 0 0 1rem;
      color: #00796b;
      font-weight: 700;
      text-align: center;
    }
    #user-modal form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    #user-modal label {
      font-weight: 600;
      font-size: 0.9rem;
      color: #444;
    }
    #user-modal input {
      padding: 0.5rem 0.75rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
      outline-color: #00796b;
    }
    #user-modal button {
      margin-top: 1rem;
      background-color: #00796b;
      border: none;
      color: white;
      padding: 0.7rem 0;
      font-size: 1rem;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 700;
      transition: background-color 0.3s ease;
    }
    #user-modal button:hover {
      background-color: #004d40;
    }
    #user-modal .close-button {
      position: absolute;
      top: 0.8rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #777;
      cursor: pointer;
      font-weight: 700;
    }
    
    /* Seller Login Modal */
    #seller-login-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 3000;
      padding: 1rem;
    }
    #seller-login-modal {
      background: white;
      max-width: 400px;
      width: 100%;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgb(0 0 0 / 0.3);
      padding: 2rem 2.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      position: relative;
    }
    #seller-login-modal h3 {
      margin: 0 0 1rem;
      color: #00796b;
      font-weight: 700;
      text-align: center;
    }
    #seller-login-modal form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    #seller-login-modal label {
      font-weight: 600;
      font-size: 0.9rem;
      color: #444;
    }
    #seller-login-modal input {
      padding: 0.5rem 0.75rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
      outline-color: #00796b;
    }
    #seller-login-modal button {
      margin-top: 1rem;
      background-color: #00796b;
      border: none;
      color: white;
      padding: 0.7rem 0;
      font-size: 1rem;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 700;
      transition: background-color 0.3s ease;
    }
    #seller-login-modal button:hover {
      background-color: #004d40;
    }
    #seller-login-modal .close-button {
      position: absolute;
      top: 0.8rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #777;
      cursor: pointer;
      font-weight: 700;
    }
    
    .login-logo {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }
    
    .login-logo i {
      font-size: 3rem;
      color: #00796b;
      background-color: #e0f2f1;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .login-error {
      color: #d32f2f;
      font-size: 0.9rem;
      text-align: center;
      min-height: 20px;
      font-weight: 500;
    }
    
    /* Shake animation for login errors */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }
    
    .shake {
      animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
    }
    
    /* Dashboard header enhancement */
    .dashboard-header-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    #last-login-info {
      font-size: 0.85rem;
      opacity: 0.9;
    }
    
    #admin-logout {
      background-color: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      padding: 0.4rem 0.8rem;
      border-radius: 4px;
      font-size: 0.9rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: background-color 0.3s ease;
    }
    
    #admin-logout:hover {
      background-color: rgba(255, 255, 255, 0.3);
    }
    
    /* Prescription upload modal */
    #prescription-modal-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 3000;
      padding: 1rem;
    }
    #prescription-modal {
      background: white;
      max-width: 500px;
      width: 100%;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgb(0 0 0 / 0.3);
      padding: 2rem;
      display: flex;
      flex-direction: column;
      position: relative;
    }
    #prescription-modal h3 {
      margin: 0 0 1.5rem;
      color: #00796b;
      font-weight: 700;
      text-align: center;
    }
    .prescription-upload-area {
      border: 2px dashed #00bfa5;
      border-radius: 6px;
      padding: 2rem;
      text-align: center;
      margin-bottom: 1.5rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .prescription-upload-area:hover {
      background-color: #f0f9f8;
    }
    .prescription-upload-icon {
      font-size: 3rem;
      color: #00bfa5;
      margin-bottom: 1rem;
    }
    .prescription-upload-text {
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }
    .prescription-upload-subtext {
      font-size: 0.85rem;
      color: #777;
    }
    #prescription-file-input {
      display: none;
    }
    .prescription-contact-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .prescription-contact-form input {
      padding: 0.75rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }
    .prescription-submit-btn {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.8rem 0;
      font-size: 1.1rem;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 700;
      transition: background-color 0.3s ease;
      margin-top: 0.5rem;
    }
    .prescription-submit-btn:hover {
      background-color: #004d40;
    }
    #prescription-modal .close-button {
      position: absolute;
      top: 1rem;
      right: 1.25rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #777;
      cursor: pointer;
      font-weight: 700;
    }

    /* Footer styles */
    footer {
      background-color: #004d40;
      color: white;
      padding: 2rem 1rem;
      margin-top: auto;
    }
    .footer-container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
    }
    .footer-section h3 {
      color: #80cbc4;
      margin-top: 0;
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }
    .footer-links {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .footer-links li {
      margin-bottom: 0.5rem;
    }
    .footer-links a {
      color: #e0f2f1;
      text-decoration: none;
      transition: color 0.3s ease;
    }
    .footer-links a:hover {
      color: white;
      text-decoration: underline;
    }
    .footer-bottom {
      text-align: center;
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid #00695c;
      font-size: 0.9rem;
    }
    .footer-bottom a {
      color: #80cbc4;
    }
    .footer-bottom a:hover {
      color: white;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .topbar {
        flex-direction: column;
        padding: 0.75rem;
        gap: 0.5rem;
      }
      header {
        padding: 1rem;
      }
      #mobile-menu-button {
        display: block;
      }
      nav {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: #00796b;
        flex-direction: column;
        padding: 1rem;
        gap: 1rem;
        display: none;
        border-top: 1px solid #00695c;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      }
      nav.active {
        display: flex;
      }
      #hero h2 {
        font-size: 2rem;
      }
      .categories-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      }
      .benefits-container {
        grid-template-columns: 1fr;
      }
    }
    @media (max-width: 600px) {
      .topbar-features, .topbar-contact {
        flex-direction: column;
        gap: 0.5rem;
        align-items: center;
      }
      #product-list {
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      }
      #search-form {
        flex-direction: column;
      }
      #search-input, #search-button {
        border-radius: 4px;
      }
      #search-button {
        margin-top: 0.5rem;
        padding: 0.75rem;
      }
      .footer-container {
        grid-template-columns: 1fr;
      }
    }
    
    /* Add notification styles */
    .cart-notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #00796b;
      color: white;
      padding: 0.8rem 1.5rem;
      border-radius: 4px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      transform: translateY(100px);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
      z-index: 5000;
    }
    .cart-notification.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    /* Checkout modal styles */
    .checkout-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 6000;
      padding: 1rem;
    }
    
    .checkout-modal-content {
      background-color: white;
      border-radius: 8px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      padding: 2rem;
      position: relative;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    
    .checkout-modal h3 {
      color: #00796b;
      margin-top: 0;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      text-align: center;
    }
    
    .checkout-modal .close-button {
      position: absolute;
      top: 1rem;
      right: 1.25rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #777;
      cursor: pointer;
      font-weight: 700;
    }
    
    .form-group {
      margin-bottom: 1.25rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #333;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 1rem;
    }
    
    .form-group textarea {
      min-height: 80px;
      resize: vertical;
    }
    
    .order-summary {
      margin-top: 2rem;
      border-top: 1px solid #eee;
      padding-top: 1rem;
    }
    
    .order-summary h4 {
      margin-top: 0;
      margin-bottom: 1rem;
      color: #333;
    }
    
    .checkout-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px dashed #eee;
    }
    
    .checkout-total {
      margin-top: 1rem;
      font-weight: 700;
      font-size: 1.1rem;
      text-align: right;
    }
    
    .checkout-submit-btn {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.75rem 0;
      margin-top: 1.5rem;
      width: 100%;
      font-size: 1.1rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    
    .checkout-submit-btn:hover {
      background-color: #00594f;
    }
    
    .checkout-submit-btn:disabled {
      background-color: #b0bec5;
      cursor: not-allowed;
    }
    
    /* Success notification */
    .success-notification {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      border-radius: 8px;
      padding: 2rem;
      width: 90%;
      max-width: 500px;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 5px 25px rgba(0,0,0,0.3);
      z-index: 6000;
    }
    
    .success-icon {
      font-size: 4rem;
      color: #4CAF50;
      margin-bottom: 1rem;
    }
    
    .success-message {
      text-align: center;
    }
    
    .success-message h3 {
      color: #00796b;
      margin-top: 0;
      margin-bottom: 1rem;
    }
    
    .success-message p {
      margin: 0.5rem 0;
      color: #555;
    }
    
    .success-close {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #777;
      cursor: pointer;
    }
    
    /* Seller Dashboard Styles */
    .dashboard-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 7000;
      display: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .dashboard-content {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #f5f5f5;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    .dashboard-header {
      background-color: #00796b;
      color: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .dashboard-header h2 {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 600;
    }
    
    .dashboard-header .close-button {
      background: none;
      border: none;
      color: white;
      font-size: 1.8rem;
      cursor: pointer;
      font-weight: 700;
    }
    
    .dashboard-main {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      overflow: auto;
      padding: 1.5rem;
    }
    
    .dashboard-sidebar {
      width: 240px;
      background-color: #263238;
      color: #fff;
      position: absolute;
      top: 60px;
      left: 0;
      bottom: 0;
      padding: 1.5rem 0;
      overflow-y: auto;
    }
    
    .dashboard-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .dashboard-menu li {
      padding: 0.8rem 1.5rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    
    .dashboard-menu li:hover {
      background-color: #37474f;
    }
    
    .dashboard-menu li.active {
      background-color: #00796b;
      font-weight: 600;
    }
    
    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 1.2rem;
      margin-left: 240px;
      margin-bottom: 1.5rem;
    }
    
    .stat-card {
      background-color: white;
      border-radius: 8px;
      padding: 1.2rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .stat-icon {
      font-size: 2rem;
      color: #00796b;
      width: 60px;
      height: 60px;
      background-color: #e0f2f1;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .stat-info {
      flex-grow: 1;
    }
    
    .stat-info h3 {
      font-size: 0.9rem;
      margin: 0 0 0.3rem;
      color: #78909c;
    }
    
    .stat-value {
      font-size: 1.6rem;
      font-weight: 700;
      color: #263238;
    }
    
    .dashboard-tabs {
      margin-left: 240px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      flex-grow: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    
    .tab-content {
      display: none;
      padding: 1.5rem;
      flex-grow: 1;
      overflow: auto;
    }
    
    .tab-content.active {
      display: flex;
      flex-direction: column;
    }
    
    .tab-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .tab-header h3 {
      margin: 0;
      font-size: 1.3rem;
      color: #263238;
    }
    
    .tab-actions {
      display: flex;
      gap: 1rem;
      align-items: center;
    }
    
    .search-container {
      display: flex;
      align-items: center;
    }
    
    .search-container input {
      padding: 0.5rem 0.75rem;
      border: 1px solid #e0e0e0;
      border-radius: 4px 0 0 4px;
      font-size: 0.9rem;
      outline: none;
      width: 200px;
    }
    
    .search-container button {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.5rem 0.75rem;
      border-radius: 0 4px 4px 0;
      cursor: pointer;
    }
    
    #order-filter {
      padding: 0.5rem;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      font-size: 0.9rem;
      outline: none;
    }
    
    .export-btn {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      font-size: 0.9rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: background-color 0.3s ease;
    }
    
    .export-btn:hover {
      background-color: #00594f;
    }
    
    .dashboard-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .dashboard-table th {
      text-align: left;
      padding: 0.8rem;
      background-color: #f5f5f5;
      font-weight: 600;
      color: #37474f;
      border-bottom: 2px solid #e0e0e0;
    }
    
    .dashboard-table td {
      padding: 0.8rem;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .dashboard-table tr:hover {
      background-color: #f9f9f9;
    }
    
    .status-badge {
      display: inline-block;
      padding: 0.3rem 0.6rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      text-align: center;
    }
    
    .status-pending {
      background-color: #fff8e1;
      color: #ff8f00;
    }
    
    .status-processing {
      background-color: #e3f2fd;
      color: #1976d2;
    }
    
    .status-completed {
      background-color: #e8f5e9;
      color: #388e3c;
    }
    
    .status-cancelled {
      background-color: #ffebee;
      color: #d32f2f;
    }
    
    .action-buttons {
      display: flex;
      gap: 0.5rem;
    }
    
    .action-buttons button {
      background: none;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      padding: 0.3rem;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }
    
    .action-buttons button:hover {
      background-color: #f1f1f1;
    }
    
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1.2rem;
    }
    
    .product-manage-card {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: box-shadow 0.3s ease;
    }
    
    .product-manage-card:hover {
      box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    }
    
    .product-manage-image {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }
    
    .product-manage-info {
      padding: 1rem;
    }
    
    .product-manage-name {
      font-weight: 600;
      margin: 0 0 0.5rem;
    }
    
    .product-manage-price {
      color: #00796b;
      font-weight: 700;
      margin-bottom: 0.8rem;
    }
    
    .product-manage-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 0.5rem;
    }
    
    .product-manage-actions button {
      background-color: #f5f5f5;
      border: none;
      padding: 0.4rem 0.6rem;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    
    .product-manage-actions button:hover {
      background-color: #e0e0e0;
    }
    
    .add-button {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    
    .add-button:hover {
      background-color: #00594f;
    }
    
    .chart-placeholder {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      border: 1px solid #e0e0e0;
    }
    
    .chart-content {
      height: 200px;
      display: flex;
      flex-direction: column;
    }
    
    .chart-bars {
      display: flex;
      align-items: flex-end;
      justify-content: space-around;
      flex-grow: 1;
      padding-bottom: 0.5rem;
    }
    
    .chart-bar {
      width: 30px;
      background-color: #26a69a;
      border-radius: 4px 4px 0 0;
    }
    
    .chart-labels {
      display: flex;
      justify-content: space-around;
    }
    
    .chart-labels span {
      font-size: 0.8rem;
      color: #757575;
    }
    
    .report-section {
      margin-bottom: 2rem;
    }
    
    .report-section h4 {
      margin-top: 0;
      margin-bottom: 1rem;
      color: #37474f;
    }
    
    .mini-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .mini-table th, .mini-table td {
      padding: 0.8rem;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }
    
    .mini-table th {
      font-weight: 600;
      color: #37474f;
      background-color: #f5f5f5;
    }
    
    .settings-form {
      max-width: 600px;
    }
    
    .settings-container {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }
    
    .settings-section {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 1.5rem;
      border: 1px solid #e0e0e0;
    }
    
    .settings-section h4 {
      margin-top: 0;
      margin-bottom: 1.25rem;
      color: #37474f;
      border-bottom: 2px solid #e0e0e0;
      padding-bottom: 0.5rem;
    }
    
    .settings-error {
      color: #d32f2f;
      font-size: 0.9rem;
      margin: 0.5rem 0;
      min-height: 20px;
    }
    
    .setting-help {
      font-size: 0.85rem;
      color: #757575;
      margin: 0.3rem 0 0 0;
    }
    
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .checkbox-group label {
      font-weight: normal;
    }
    
    .checkbox-group input[type="checkbox"] {
      width: auto;
      margin-right: 0.5rem;
    }
    
    .change-password-btn, .save-security-btn {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      margin-top: 1rem;
      transition: background-color 0.3s ease;
    }
    
    .change-password-btn:hover, .save-security-btn:hover {
      background-color: #00594f;
    }
    
    .save-settings-btn {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      margin-top: 1rem;
      transition: background-color 0.3s ease;
    }
    
    .save-settings-btn:hover {
      background-color: #00594f;
    }
    
    /* Responsive adjustments for dashboard */
    @media (max-width: 992px) {
      .dashboard-sidebar {
        width: 70px;
      }
      .dashboard-menu li span {
        display: none;
      }
      .dashboard-stats, 
      .dashboard-tabs {
        margin-left: 70px;
      }
    }
    
    @media (max-width: 768px) {
      .dashboard-sidebar {
        position: fixed;
        width: 240px;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        z-index: 1000;
      }
      .dashboard-sidebar.active {
        transform: translateX(0);
      }
      .dashboard-menu li span {
        display: inline;
      }
      .dashboard-stats, 
      .dashboard-tabs {
        margin-left: 0;
      }
      .tab-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      .tab-actions {
        width: 100%;
        flex-direction: column;
        align-items: flex-start;
      }
      .search-container {
        width: 100%;
      }
      .search-container input {
        flex-grow: 1;
        width: auto;
      }
    }
    
    /* Category active state */
    .category-card.active {
      background-color: #e0f2f1;
      border: 2px solid #00bfa5;
    }
    
    /* Fade transitions for modals */
    #cart-overlay, #user-modal-overlay, #prescription-modal-overlay {
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    /* Add styles for checkout modal */
    .checkout-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .checkout-modal-content {
      background-color: white;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      border-radius: 8px;
      padding: 20px;
      position: relative;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }
    
    .checkout-modal-content h3 {
      color: #00796b;
      margin-bottom: 20px;
      text-align: center;
      font-size: 1.5rem;
    }
    
    .checkout-modal-content .form-group {
      margin-bottom: 15px;
    }
    
    .checkout-modal-content label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: #333;
    }
    
    .checkout-modal-content input,
    .checkout-modal-content textarea,
    .checkout-modal-content select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 1rem;
    }
    
    .checkout-modal-content textarea {
      min-height: 80px;
      resize: vertical;
    }
    
    .checkout-modal-content .close-button {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
    }
    
    .checkout-modal-content .order-summary {
      background-color: #f9f9f9;
      padding: 15px;
      border-radius: 6px;
      margin: 20px 0;
    }
    
    .checkout-modal-content .order-summary h4 {
      margin-bottom: 15px;
      color: #00796b;
    }
    
    .checkout-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      padding-bottom: 8px;
      border-bottom: 1px solid #eee;
    }
    
    .checkout-item.delivery-charge {
      border-top: 1px solid #ccc;
      padding-top: 8px;
      margin-top: 8px;
      font-weight: 600;
      color: #00796b;
    }
    
    .checkout-total {
      text-align: right;
      font-weight: 700;
      margin-top: 15px;
      font-size: 1.1rem;
      color: #d32f2f;
    }
    
    .checkout-submit-btn {
      background-color: #00796b;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      width: 100%;
      margin-top: 10px;
      transition: background-color 0.3s;
    }
    
    .checkout-submit-btn:hover {
      background-color: #00695c;
    }
    
    .checkout-submit-btn:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    /* Enhanced thank you notification styles */
    .enhanced-thank-you {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .enhanced-thank-you.show {
      opacity: 1;
    }
    
    .thank-you-container {
      background-color: white;
      width: 90%;
      max-width: 500px;
      border-radius: 8px;
      padding: 30px;
      text-align: center;
      position: relative;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      transform: translateY(40px);
      opacity: 0;
      transition: transform 0.5s ease, opacity 0.5s ease;
    }
    
    .thank-you-container.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    .thank-you-icon {
      margin-bottom: 20px;
    }
    
    .checkmark-circle {
      width: 80px;
      height: 80px;
      background-color: #4CAF50;
      border-radius: 50%;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      position: relative;
      animation: checkmarkCircle 0.5s cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
    }
    
    @keyframes checkmarkCircle {
      0% {
        transform: scale(0);
      }
      100% {
        transform: scale(1);
      }
    }
    
    .checkmark-stem {
      position: absolute;
      width: 6px;
      height: 26px;
      background-color: white;
      left: 42px;
      top: 20px;
      border-radius: 3px;
      transform: rotate(45deg);
      animation: checkmarkStem 0.3s ease-in-out 0.4s forwards;
      opacity: 0;
    }
    
    @keyframes checkmarkStem {
      0% {
        height: 0;
        opacity: 0;
      }
      100% {
        height: 26px;
        opacity: 1;
      }
    }
    
    .checkmark-kick {
      position: absolute;
      width: 15px;
      height: 6px;
      background-color: white;
      left: 28px;
      top: 40px;
      border-radius: 3px;
      transform: rotate(45deg);
      animation: checkmarkKick 0.3s ease-in-out 0.4s forwards;
      opacity: 0;
    }
    
    @keyframes checkmarkKick {
      0% {
        width: 0;
        opacity: 0;
      }
      100% {
        width: 15px;
        opacity: 1;
      }
    }
    
    .thank-you-container h2 {
      color: #00796b;
      margin-bottom: 10px;
      font-size: 1.8rem;
      opacity: 0;
      animation: fadeIn 0.6s ease-in-out 0.6s forwards;
    }
    
    .order-number {
      color: #00796b;
      font-weight: 600;
      font-size: 1.2rem;
      margin-bottom: 20px;
      opacity: 0;
      animation: fadeIn 0.6s ease-in-out 0.7s forwards;
    }
    
    .order-details {
      margin-bottom: 20px;
      opacity: 0;
      animation: fadeIn 0.6s ease-in-out 0.8s forwards;
    }
    
    .order-details p {
      margin-bottom: 8px;
      color: #444;
    }
    
    .order-summary {
      background-color: #f9f9f9;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
      text-align: left;
      opacity: 0;
      animation: fadeIn 0.6s ease-in-out 0.9s forwards;
    }
    
    .order-summary p {
      margin-bottom: 5px;
      display: flex;
      justify-content: space-between;
    }
    
    .delivery-info {
      margin-top: 20px;
      margin-bottom: 25px;
      opacity: 0;
      animation: fadeIn 0.6s ease-in-out 1s forwards;
    }
    
    .delivery-info p {
      margin-bottom: 8px;
      color: #555;
    }
    
    .delivery-info i {
      color: #00796b;
      margin-right: 8px;
    }
    
    .close-thank-you {
      background-color: #00796b;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background-color 0.3s;
      opacity: 0;
      animation: fadeIn 0.6s ease-in-out 1.1s forwards;
    }
    
    .close-thank-you:hover {
      background-color: #00695c;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    
    .confetti-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }

    /* Add CSS for the confetti animation */
    .confetti {
      position: absolute;
      top: -20px;
      background-color: #f00;
      border-radius: 50%;
      animation: confetti-fall linear forwards;
    }
    
    .confetti:nth-child(5n) { background-color: #f00; } /* Red */
    .confetti:nth-child(5n+1) { background-color: #3cb878; } /* Green */
    .confetti:nth-child(5n+2) { background-color: #f6c60b; } /* Yellow */
    .confetti:nth-child(5n+3) { background-color: #00adef; } /* Blue */
    .confetti:nth-child(5n+4) { background-color: #9e40ae; } /* Purple */
    
    @keyframes confetti-fall {
      0% {
        transform: translateY(0) rotate(0) translateX(0);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg) translateX(var(--translate-x));
        opacity: 0;
      }
    }

    /* Add styles for cart quantity controls */
    .cart-item-qty {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .cart-item-qty button {
      width: 24px;
      height: 24px;
      background-color: #f0f0f0;
      border: none;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .cart-item-qty button:hover {
      background-color: #e0e0e0;
    }
    
    .cart-item-qty span {
      min-width: 24px;
      text-align: center;
      font-weight: 600;
    }
    
    .feedback-form {
      background-color: #f9f9f9;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .type-badge {
      display: inline-block;
      padding: 0.3rem 0.6rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      text-align: center;
    }
    
    .type-query {
      background-color: #e3f2fd;
      color: #1976d2;
    }
    
    .type-feedback {
      background-color: #e8f5e9;
      color: #388e3c;
    }
    
    .type-complaint {
      background-color: #ffebee;
      color: #d32f2f;
    }
    
    .type-suggestion {
      background-color: #fff8e1;
      color: #ff8f00;
    }
    
    .status-read {
      background-color: #e0e0e0;
      color: #616161;
    }
    
    .status-unread {
      background-color: #e8f5e9;
      color: #388e3c;
      font-weight: 700;
    }
    
    .unread-badge {
      background-color: #d32f2f;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      margin-left: 0.5rem;
      font-weight: 700;
    }
    
    .view-feedback-btn {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.3rem 0.6rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.85rem;
    }
    
    .view-feedback-btn:hover {
      background-color: #00594f;
    }

    /* Dashboard table styles */
    .dashboard-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    
    .dashboard-table th,
    .dashboard-table td {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #e0e0e0;
      text-align: left;
    }
    
    .dashboard-table th {
      background-color: #f5f5f5;
      font-weight: 600;
      color: #333;
    }
    
    .dashboard-table tbody tr:hover {
      background-color: #f9f9f9;
    }
    
    .dashboard-table .action-buttons {
      display: flex;
      gap: 5px;
      justify-content: flex-end;
    }
    
    .dashboard-table .action-buttons button {
      background-color: transparent;
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #555;
      transition: all 0.2s ease;
    }
    
    .dashboard-table .view-order-btn {
      background-color: #E1F5FE;
      color: #0288D1;
    }
    
    .dashboard-table .view-order-btn:hover {
      background-color: #B3E5FC;
      color: #01579B;
    }
    
    .dashboard-table .status-change-btn[data-status="processing"] {
      background-color: #E3F2FD;
      color: #1976D2;
    }
    
    .dashboard-table .status-change-btn[data-status="processing"]:hover {
      background-color: #BBDEFB;
      color: #0D47A1;
    }
    
    .dashboard-table .status-change-btn[data-status="completed"] {
      background-color: #E8F5E9;
      color: #388E3C;
    }
    
    .dashboard-table .status-change-btn[data-status="completed"]:hover {
      background-color: #C8E6C9;
      color: #1B5E20;
    }
    
    .dashboard-table .status-change-btn[data-status="cancelled"] {
      background-color: #FFEBEE;
      color: #D32F2F;
    }
    
    .dashboard-table .status-change-btn[data-status="cancelled"]:hover {
      background-color: #FFCDD2;
      color: #B71C1C;
    }

    /* Order Details Styles */
    .order-details-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
              opacity: 0;
              transition: opacity 0.3s ease;
    }
    
    .order-details-content {
      background-color: white;
      width: 90%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      border-radius: 8px;
      padding: 20px;
      position: relative;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
              transform: translateY(20px);
              transition: transform 0.3s ease;
            }
            
            .order-details-modal.visible {
              opacity: 1;
            }
            
            .order-details-modal.visible .order-details-content {
              transform: translateY(0);
        }
        
        .close-order-details {
          position: absolute;
          top: 10px;
          right: 10px;
          background: none;
          border: none;
          font-size: 1.5rem;
          cursor: pointer;
          color: #666;
        }
        
        .order-details-header {
          display: flex;
          justify-content: space-between;
          flex-wrap: wrap;
          margin-bottom: 20px;
          padding-bottom: 15px;
          border-bottom: 1px solid #eee;
        }
        
        .order-details-header > div {
          flex: 1;
          min-width: 250px;
        }
        
        /* Receipt Styles */
        .receipt-container {
          background-color: #fff;
          border-radius: 8px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
          padding: 20px;
          margin-bottom: 20px;
        }
        
        .receipt-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding-bottom: 15px;
          border-bottom: 2px solid #00796b;
          margin-bottom: 20px;
        }
        
        .receipt-logo {
          display: flex;
          align-items: center;
        }
        
        .receipt-logo-icon {
          font-size: 2.5rem;
          color: #00796b;
          margin-right: 15px;
        }
        
        .receipt-brand h2 {
          margin: 0;
          color: #00796b;
          font-size: 1.5rem;
        }
        
        .receipt-brand p {
          margin: 0;
          color: #666;
          font-size: 0.9rem;
          font-style: italic;
        }
        
        .receipt-info {
          text-align: right;
        }
        
        .receipt-info p {
          margin: 5px 0;
        }
        
        .receipt-section-title {
          background-color: #f5f5f5;
          padding: 8px 15px;
          font-weight: bold;
          border-left: 4px solid #00796b;
          margin-bottom: 10px;
          color: #333;
        }
        
        .receipt-customer-details {
          margin-bottom: 20px;
        }
        
        .receipt-customer-content {
          display: flex;
          flex-wrap: wrap;
          gap: 20px;
          padding: 0 10px;
        }
        
        .receipt-customer-content > div {
          flex: 1;
          min-width: 250px;
        }
        
        .receipt-items {
          margin-bottom: 20px;
        }
        
        .receipt-footer {
          margin-top: 30px;
          text-align: center;
          padding-top: 15px;
          border-top: 1px dashed #ccc;
        }
        
        .receipt-policy {
          font-size: 0.9rem;
          color: #666;
          margin: 10px 0;
        }
        
        .receipt-contact {
          font-size: 0.9rem;
        }
        
        @media print {
          .order-details-content {
            width: 100%;
            max-width: 100%;
            box-shadow: none;
            padding: 0;
          }
          
          .close-order-details,
          .order-actions {
            display: none !important;
          }
          
          .receipt-container {
            box-shadow: none;
            padding: 0;
          }
          
          body * {
            visibility: hidden;
          }
          
          .order-details-content,
          .order-details-content * {
            visibility: visible;
          }
          
          .order-details-content {
            position: absolute;
            left: 0;
            top: 0;
          }
        }
        
        .order-items-table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 20px;
        }
        
        .order-items-table th,
        .order-items-table td {
          padding: 10px;
          border: 1px solid #ddd;
          text-align: left;
        }
        
        .order-items-table th {
          background-color: #f5f5f5;
        }
        
        .order-items-table tfoot tr {
          background-color: #f9f9f9;
        }
        
        .order-items-table tfoot .order-total {
          background-color: #e0f2f1;
          font-weight: bold;
          color: #00796b;
        }
        
        .text-right {
          text-align: right;
        }
        
        .order-actions {
          display: flex;
          gap: 10px;
          justify-content: flex-end;
          margin-top: 20px;
        }
        
        .order-actions button {
          padding: 8px 15px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 5px;
        }
        
        .print-order-btn {
          background-color: #f5f5f5;
          color: #333;
        }
        
        .print-order-btn:hover {
          background-color: #e0e0e0;
        }
            
            /* Loading indicator */
            .loading-overlay {
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background-color: rgba(0, 0, 0, 0.5);
              z-index: 3000;
              display: flex;
              align-items: center;
              justify-content: center;
            }
            
            .loading-spinner {
              width: 50px;
              height: 50px;
              border: 5px solid #f3f3f3;
              border-top: 5px solid #00796b;
              border-radius: 50%;
              animation: spin 1s linear infinite;
            }
            
            /* Items loading indicator */
            .items-loading {
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              padding: 20px;
              background-color: #f9f9f9;
              border-radius: 4px;
            }
            
            .items-loading-spinner {
              width: 30px;
              height: 30px;
              border: 3px solid #e0e0e0;
              border-top: 3px solid #00796b;
              border-radius: 50%;
              animation: spin 1s linear infinite;
              margin-bottom: 10px;
            }
            
            .items-loading p {
              color: #666;
              margin: 0;
            }
            
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
    }
  </style>
  <!-- Add audio element for notification sounds -->
  <audio id="order-success-sound" preload="auto">
    <source src="https://assets.mixkit.co/active_storage/sfx/2005/2005-preview.mp3" type="audio/mpeg">
    <!-- Fallback audio URL if the first one doesn't work -->
    <source src="https://www.soundjay.com/buttons/sounds/button-14.mp3" type="audio/mpeg">
  </audio>
</head>
<body>
  <!-- Add audio elements for notification sounds -->
  <audio id="order-success-sound" preload="auto">
    <source src="https://assets.mixkit.co/active_storage/sfx/2005/2005-preview.mp3" type="audio/mpeg">
    <!-- Fallback audio URL if the first one doesn't work -->
    <source src="https://www.soundjay.com/buttons/sounds/button-14.mp3" type="audio/mpeg">
  </audio>

  <!-- Topbar with contact information and features -->
  <div class="topbar">
    <div class="topbar-contact">
      <a href="tel:+923072750177"><i class="fas fa-phone-alt"></i> +92 307 2750177</a>
      <a href="mailto:rasheedsonsemed@gmail.com"><i class="fas fa-envelope"></i> rasheedsonsemed@gmail.com</a>
    </div>
    <div class="topbar-features">
      <span><i class="fas fa-truck"></i> Free Delivery on orders over Rs.1000</span>
      <span><i class="fas fa-shield-alt"></i> 100% Genuine Products</span>
      <span><i class="fas fa-headset"></i> 24/7 Customer Support</span>
    </div>
  </div>

  <header>
    <h1>Rasheed Sons EMED</h1>
    <button id="mobile-menu-button" aria-label="Toggle mobile menu">
      <i class="fas fa-bars"></i>
    </button>
    <nav id="main-nav">
      <a href="#hero" id="nav-home">Home</a>
      <a href="#shop-section" id="nav-shop">Shop</a>
      <a href="#categories-section" id="nav-categories">Categories</a>
      <a href="#about-section" id="nav-about">About</a>
      <a href="#contact-section" id="nav-contact">Contact</a>
      <button id="cart-button" aria-label="View Cart"><i class="fas fa-shopping-cart"></i> Cart (<span id="cart-count">0</span>)</button>
      <button id="login-button"><i class="fas fa-user"></i> Login</button>
      <a href="#upload-prescription" id="nav-prescription" class="prescription-btn"><i class="fas fa-file-medical"></i> Upload Prescription</a>
    </nav>
  </header>

  <section id="hero">
    <h2>Your Trusted Online Pharmacy</h2>
    <p>Safe, fast, and easy access to medicines and healthcare products.</p>
    <form id="search-form" aria-label="Search for medicines">
      <input type="text" id="search-input" placeholder="Search medicines, brands, health products..." aria-label="Search medicines" autocomplete="off" />
      <button type="submit" id="search-button"><i class="fas fa-search"></i></button>
    </form>
  </section>

  <main>
    <section id="categories-section" aria-label="Categories Section">
      <h2 class="section-title">Medicine Categories</h2>
      <div class="categories-grid" role="list" aria-live="polite" aria-atomic="true">
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-pills"></i></div>
          <div class="category-name">Pain Relief</div>
        </div>
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-heart"></i></div>
          <div class="category-name">Heart Health</div>
        </div>
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-lungs"></i></div>
          <div class="category-name">Respiratory</div>
        </div>
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-brain"></i></div>
          <div class="category-name">Mental Health</div>
        </div>
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-bug"></i></div>
          <div class="category-name">Antibiotics</div>
        </div>
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-capsules"></i></div>
          <div class="category-name">Vitamins</div>
        </div>
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-baby"></i></div>
          <div class="category-name">Infant Nutrition</div>
        </div>
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-leaf"></i></div>
          <div class="category-name">Herbal</div>
        </div>
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-spa"></i></div>
          <div class="category-name">Cosmetics</div>
        </div>
        <div class="category-card" role="listitem">
          <div class="category-icon"><i class="fas fa-shopping-basket"></i></div>
          <div class="category-name">General Store</div>
        </div>
      </div>
    </section>

    <section id="shop-section" aria-label="Shop Section" style="margin-top:3rem;">
      <h2 class="section-title">Featured Medicines</h2>
      <div id="product-list" role="list" aria-live="polite" aria-atomic="true">
        <!-- Products will be populated here dynamically -->
      </div>
    </section>
    
    <section id="benefits-section" aria-label="Benefits Section" style="margin-top:4rem;">
      <h2 class="section-title">Why Choose Rasheed Sons EMED</h2>
      <div class="benefits-container">
        <div class="benefit-card">
          <div class="benefit-icon"><i class="fas fa-shipping-fast"></i></div>
          <div class="benefit-title">Fast & Free Delivery</div>
          <div class="benefit-description">Free delivery on orders over Rs.1000 with quick processing and shipping of your medications.</div>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon"><i class="fas fa-certificate"></i></div>
          <div class="benefit-title">100% Genuine Products</div>
          <div class="benefit-description">All our medicines and healthcare products are sourced directly from authorized distributors to guarantee authenticity.</div>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon"><i class="fas fa-wallet"></i></div>
          <div class="benefit-title">Competitive Pricing</div>
          <div class="benefit-description">We offer competitive prices on all medicines and healthcare products to make healthcare more accessible.</div>
        </div>
        <div class="benefit-card">
          <div class="benefit-icon"><i class="fas fa-file-prescription"></i></div>
          <div class="benefit-title">Easy Prescription Upload</div>
          <div class="benefit-description">Simply upload your prescription online, and we'll prepare your order for quick delivery.</div>
        </div>
      </div>
    </section>

    <section id="about-section" aria-label="About Section" style="margin-top:4rem;">
      <h2 class="section-title">About Us</h2>
      <p>
        Rasheed Sons EMED is your reliable partner for convenient access to quality medicines and health essentials. We guarantee fast delivery, expert advice, and secure shopping — all within the comfort of your home.
      </p>
      <p>
        Our platform connects you with trusted pharma suppliers and provides detailed product information to help you make informed health decisions.
      </p>
    </section>

    <section id="contact-section" aria-label="Contact Section" style="margin-top:4rem; margin-bottom: 2rem;">
      <h2 class="section-title">Contact Us</h2>
      <p>Have questions or need help? Reach out to us!</p>
      <div id="contact-info-container">
        <!-- This will be populated from localStorage -->
      </div>
    </section>
  </main>

  <!-- Cart Overlay -->
  <div id="cart-overlay" role="dialog" aria-modal="true" aria-labelledby="cart-header">
    <div id="cart">
      <header>
        <div id="cart-header">Your Cart (<span id="cart-item-count">0</span> items)</div>
        <button id="close-cart" aria-label="Close Cart">&times;</button>
      </header>
      <div id="cart-items" tabindex="0" aria-live="polite" aria-relevant="additions removals"></div>
      <div id="checkout-section">
        <div id="total-price">Total: Rs.0.00</div>
        <button id="checkout-button">Checkout</button>
      </div>
    </div>
  </div>

  <!-- User Login Modal -->
  <div id="user-modal-overlay" role="dialog" aria-modal="true" aria-labelledby="user-modal-title">
    <div id="user-modal">
      <button class="close-button" id="close-user-modal" aria-label="Close Login Modal">&times;</button>
      <h3 id="user-modal-title">Login to Rasheed Sons EMED</h3>
      <form id="login-form" aria-label="Login form">
        <label for="user-email">Email:</label>
        <input type="email" id="user-email" required autocomplete="username" />
        <label for="user-password">Password:</label>
        <input type="password" id="user-password" required autocomplete="current-password" />
        <button type="submit">Login</button>
      </form>
    </div>
  </div>
  
  <!-- Seller Login Modal -->
  <div id="seller-login-overlay" role="dialog" aria-modal="true" aria-labelledby="seller-login-title">
    <div id="seller-login-modal">
      <button class="close-button" id="close-seller-login" aria-label="Close Seller Login Modal">&times;</button>
      <h3 id="seller-login-title">Seller Dashboard Login</h3>
      <div class="login-logo">
        <i class="fas fa-lock"></i>
      </div>
      <form id="seller-login-form" aria-label="Seller login form">
        <div class="form-group">
          <label for="seller-username">Admin Username:</label>
          <input type="text" id="seller-username" required autocomplete="username" />
        </div>
        <div class="form-group">
          <label for="seller-password">Admin Password:</label>
          <input type="password" id="seller-password" required autocomplete="current-password" />
        </div>
        <div id="seller-login-error" class="login-error"></div>
        <button type="submit" class="seller-login-btn">Login to Dashboard</button>
      </form>
    </div>
  </div>
  
  <!-- Prescription Upload Modal -->
  <div id="prescription-modal-overlay" role="dialog" aria-modal="true" aria-labelledby="prescription-modal-title">
    <div id="prescription-modal">
      <button class="close-button" id="close-prescription-modal" aria-label="Close Prescription Modal">&times;</button>
      <h3 id="prescription-modal-title">Upload Your Prescription</h3>
      
      <label for="prescription-file-input" class="prescription-upload-area">
        <div class="prescription-upload-icon"><i class="fas fa-file-medical"></i></div>
        <div class="prescription-upload-text">Click to upload your prescription</div>
        <div class="prescription-upload-subtext">Accepted formats: JPG, PNG, PDF (Max: 5MB)</div>
      </label>
      <input type="file" id="prescription-file-input" accept=".jpg,.jpeg,.png,.pdf" />
      
      <form class="prescription-contact-form">
        <input type="text" placeholder="Your Name" required />
        <input type="tel" placeholder="Phone Number" required />
        <input type="email" placeholder="Email Address" required />
        <input type="text" placeholder="Delivery Address" required />
        <button type="submit" class="prescription-submit-btn">Submit Prescription</button>
      </form>
    </div>
  </div>

  <footer>
    <div class="footer-container">
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul class="footer-links">
          <li><a href="#hero">Home</a></li>
          <li><a href="#shop-section">Shop</a></li>
          <li><a href="#categories-section">Categories</a></li>
          <li><a href="#about-section">About Us</a></li>
          <li><a href="#contact-section">Contact Us</a></li>
          <li><a href="#" id="seller-dashboard-link">Seller Dashboard</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Our Categories</h3>
        <ul class="footer-links">
          <li><a href="#">Pain Relief</a></li>
          <li><a href="#">Heart Health</a></li>
          <li><a href="#">Respiratory</a></li>
          <li><a href="#">Mental Health</a></li>
          <li><a href="#">Antibiotics</a></li>
          <li><a href="#">Infant Nutrition</a></li>
          <li><a href="#">Herbal</a></li>
          <li><a href="#">Cosmetics</a></li>
          <li><a href="#">General Store</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Customer Service</h3>
        <ul class="footer-links">
          <li><a href="#">Shipping Policy</a></li>
          <li><a href="#">Return Policy</a></li>
          <li><a href="#">Privacy Policy</a></li>
          <li><a href="#">Terms & Conditions</a></li>
          <li><a href="#">FAQs</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
    &copy; 2024 Rasheed Sons EMED. All rights reserved. | <a href="mailto:rasheedsonsemed@gmail.com">rasheedsonsemed@gmail.com</a>
    </div>
  </footer>
  
  <!-- Seller Dashboard Modal -->
  <div id="seller-dashboard-overlay" class="dashboard-overlay">
    <div class="dashboard-content">
      <div class="dashboard-header">
        <h2>Rasheed Sons EMED - Seller Dashboard</h2>
        <div class="dashboard-header-actions">
          <span id="last-login-info">Last login: N/A</span>
          <button id="admin-logout"><i class="fas fa-sign-out-alt"></i> Logout</button>
          <button class="close-button" id="close-dashboard">&times;</button>
        </div>
      </div>
      <div class="dashboard-sidebar">
        <ul class="dashboard-menu">
          <li class="active" data-tab="orders-tab"><i class="fas fa-shopping-bag"></i> Orders</li>
          <li data-tab="products-tab"><i class="fas fa-pills"></i> Products</li>
          <li data-tab="customers-tab"><i class="fas fa-users"></i> Customers</li>
          <li data-tab="reports-tab"><i class="fas fa-chart-bar"></i> Reports</li>
          <li data-tab="settings-tab"><i class="fas fa-cog"></i> Settings</li>
          <li data-tab="feedback-tab"><i class="fas fa-comment-alt"></i> Feedback</li>
        </ul>
      </div>
      <div class="dashboard-main">
        <div class="dashboard-stats">
          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-shopping-bag"></i></div>
            <div class="stat-info">
              <h3>Total Orders</h3>
              <div class="stat-value" id="total-orders">0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-money-bill-wave"></i></div>
            <div class="stat-info">
              <h3>Total Revenue</h3>
              <div class="stat-value" id="total-revenue">Rs.0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-clock"></i></div>
            <div class="stat-info">
              <h3>Pending Orders</h3>
              <div class="stat-value" id="pending-orders">0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-users"></i></div>
            <div class="stat-info">
              <h3>Customers</h3>
              <div class="stat-value" id="total-customers">0</div>
            </div>
          </div>
        </div>
        
        <div class="dashboard-tabs">
          <!-- Orders Tab -->
          <div class="tab-content active" id="orders-tab">
            <div class="tab-header">
              <h3>Recent Orders</h3>
              <div class="tab-actions">
                <div class="search-container">
                  <input type="text" id="order-search" placeholder="Search orders...">
                  <button><i class="fas fa-search"></i></button>
                </div>
                <select id="order-filter">
                  <option value="all">All Orders</option>
                  <option value="pending">Pending</option>
                  <option value="processing">Processing</option>
                  <option value="completed">Completed</option>
                  <option value="cancelled">Cancelled</option>
                </select>
                <button id="export-orders-btn" class="export-btn"><i class="fas fa-file-export"></i> Export CSV</button>
              </div>
            </div>
            <div class="orders-table-container">
              <table class="dashboard-table" id="orders-table">
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Customer</th>
                    <th>Date</th>
                    <th>Items</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody id="orders-list">
                  <!-- Order rows will be populated here -->
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Products Tab -->
          <div class="tab-content" id="products-tab">
            <div class="tab-header">
              <h3>Manage Products</h3>
              <div class="tab-actions">
                <button class="add-button" id="add-product-btn"><i class="fas fa-plus"></i> Add Product</button>
              </div>
            </div>
            <div class="products-grid" id="products-grid">
              <!-- Product cards will be populated here -->
            </div>
          </div>
          
          <!-- Customers Tab -->
          <div class="tab-content" id="customers-tab">
            <div class="tab-header">
              <h3>Customers</h3>
              <div class="tab-actions">
                <div class="search-container">
                  <input type="text" id="customer-search" placeholder="Search customers...">
                  <button><i class="fas fa-search"></i></button>
                </div>
              </div>
            </div>
            <div class="customers-table-container">
              <table class="dashboard-table" id="customers-table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Address</th>
                    <th>Orders</th>
                    <th>Total Spent</th>
                  </tr>
                </thead>
                <tbody id="customers-list">
                  <!-- Customer rows will be populated here -->
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Reports Tab -->
          <div class="tab-content" id="reports-tab">
            <div class="tab-header">
              <h3>Reports & Analytics</h3>
            </div>
            <div class="reports-container">
              <div class="report-section">
                <h4>Sales Overview</h4>
                <div class="chart-placeholder">
                  <div class="chart-content">
                    <div class="chart-bars">
                      <div class="chart-bar" style="height: 30%"></div>
                      <div class="chart-bar" style="height: 50%"></div>
                      <div class="chart-bar" style="height: 70%"></div>
                      <div class="chart-bar" style="height: 60%"></div>
                      <div class="chart-bar" style="height: 80%"></div>
                      <div class="chart-bar" style="height: 45%"></div>
                      <div class="chart-bar" style="height: 65%"></div>
                    </div>
                    <div class="chart-labels">
                      <span>Mon</span>
                      <span>Tue</span>
                      <span>Wed</span>
                      <span>Thu</span>
                      <span>Fri</span>
                      <span>Sat</span>
                      <span>Sun</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="report-section">
                <h4>Top Selling Products</h4>
                <table class="mini-table">
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Units Sold</th>
                      <th>Revenue</th>
                    </tr>
                  </thead>
                  <tbody id="top-products">
                    <!-- Will be populated -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
          <!-- Settings Tab -->
          <div class="tab-content" id="settings-tab">
            <div class="tab-header">
              <h3>Dashboard Settings</h3>
            </div>
            
            <div class="settings-container">
              <div class="settings-section">
                <h4>Store Information</h4>
                <div class="settings-form">
                  <div class="form-group">
                    <label>Store Name</label>
                    <input type="text" id="store-name" value="Rasheed Sons EMED">
                  </div>
                  <div class="form-group">
                    <label>Contact Email</label>
                    <input type="email" id="store-email" value="rasheedsonsemed@gmail.com">
                  </div>
                  <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="store-phone" value="+92 307 2750177">
                  </div>
                  <div class="form-group">
                    <label>Address</label>
                    <textarea id="store-address">123 Health St, Medicity, Pakistan</textarea>
                  </div>
                  <div class="form-group">
                    <label>Delivery Fee</label>
                    <input type="number" id="delivery-fee" value="100">
                  </div>
                  <div class="form-group">
                    <label>Free Delivery Threshold</label>
                    <input type="number" id="free-delivery-threshold" value="1000">
                  </div>
                  <button class="save-settings-btn" id="save-store-settings-btn">Save Store Settings</button>
                </div>
              </div>
              
              <div class="settings-section">
                <h4>Contact Information</h4>
                <div class="settings-form">
                  <p>Edit the contact information that appears on your website.</p>
                  
                  <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="contact-email" value="rasheedsonsemed@gmail.com">
                  </div>
                  <div class="form-group">
                    <label>Phone</label>
                    <input type="tel" id="contact-phone" value="+92 307 2750177">
                  </div>
                  <div class="form-group">
                    <label>Address</label>
                    <textarea id="contact-address">123 Health St, Medicity, Pakistan</textarea>
                  </div>
                  <div class="form-group">
                    <label>Hours of Operation</label>
                    <input type="text" id="contact-hours" value="Mon-Sat: 9am - 9pm, Sun: 10am - 6pm">
                  </div>
                  <div class="form-group">
                    <label>WhatsApp Number (optional)</label>
                    <input type="tel" id="contact-whatsapp" value="+92 307 2750177">
                  </div>
                  <div class="form-group">
                    <label>Additional Contact Info (HTML supported)</label>
                    <textarea id="contact-additional" rows="4">Need assistance with your medication? Our pharmacists are available for consultation.</textarea>
                  </div>
                  <button class="save-settings-btn" id="save-contact-btn">Save Contact Information</button>
                </div>
              </div>
            </div>
          </div>
          <!-- Feedback Tab -->
          <div class="tab-content" id="feedback-tab">
            <div class="tab-header">
              <h3>Feedback & Queries</h3>
              <div class="tab-actions">
                <div class="search-container">
                  <input type="text" id="feedback-search" placeholder="Search feedback...">
                  <button><i class="fas fa-search"></i></button>
                </div>
                <select id="feedback-filter">
                  <option value="all">All Messages</option>
                  <option value="query">Questions</option>
                  <option value="feedback">Feedback</option>
                  <option value="complaint">Complaints</option>
                  <option value="suggestion">Suggestions</option>
                  <option value="unread">Unread</option>
                  <option value="read">Read</option>
                </select>
                <button id="export-feedback-btn" class="export-btn"><i class="fas fa-file-export"></i> Export CSV</button>
              </div>
            </div>
            <div class="feedback-table-container">
              <table class="dashboard-table" id="feedback-table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Subject</th>
                    <th>Status</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody id="feedback-list">
                  <!-- Feedback rows will be populated here -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add these modal dialogs for product management after the seller dashboard -->
  <div id="add-product-modal" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 8000; justify-content: center; align-items: center;">
    <div class="modal-content" style="background-color: white; border-radius: 8px; max-width: 500px; width: 100%; padding: 2rem; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
      <button class="close-button" id="close-add-product-modal" style="position: absolute; top: 1rem; right: 1.25rem; background: none; border: none; font-size: 1.5rem; color: #777; cursor: pointer;">&times;</button>
      <h3 style="margin-top: 0; margin-bottom: 1.5rem; color: #00796b; text-align: center;">Add New Product</h3>
      <form id="add-product-form">
        <div class="form-group">
          <label for="new-product-name">Product Name</label>
          <input type="text" id="new-product-name" required>
        </div>
        <div class="form-group">
          <label for="new-product-description">Description</label>
          <textarea id="new-product-description" required></textarea>
        </div>
        <div class="form-group">
          <label for="new-product-price">Price (Rs.)</label>
          <input type="number" id="new-product-price" step="0.01" min="0" required>
        </div>
        <div class="form-group">
          <label for="new-product-category">Category</label>
          <select id="new-product-category" required>
            <option value="">Select Category</option>
            <option value="Pain Relief">Pain Relief</option>
            <option value="Heart Health">Heart Health</option>
            <option value="Respiratory">Respiratory</option>
            <option value="Mental Health">Mental Health</option>
            <option value="Antibiotics">Antibiotics</option>
            <option value="Vitamins">Vitamins</option>
            <option value="Infant Nutrition">Infant Nutrition</option>
            <option value="Herbal">Herbal</option>
            <option value="Cosmetics">Cosmetics</option>
            <option value="General Store">General Store</option>
          </select>
        </div>
        <div class="form-group checkbox-group">
          <input type="checkbox" id="new-product-generic">
          <label for="new-product-generic">Generic Medicine</label>
        </div>
        <div class="form-group">
          <label for="new-product-image">Image URL</label>
          <input type="url" id="new-product-image" value="https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60" required>
        </div>
        <button type="submit" class="save-product-btn" style="background-color: #00796b; color: white; border: none; padding: 0.75rem 0; width: 100%; font-size: 1.1rem; border-radius: 4px; cursor: pointer; font-weight: 600; margin-top: 1rem;">Add Product</button>
      </form>
    </div>
  </div>

  <div id="edit-product-modal" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 8000; justify-content: center; align-items: center;">
    <div class="modal-content" style="background-color: white; border-radius: 8px; max-width: 500px; width: 100%; padding: 2rem; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
      <button class="close-button" id="close-edit-product-modal" style="position: absolute; top: 1rem; right: 1.25rem; background: none; border: none; font-size: 1.5rem; color: #777; cursor: pointer;">&times;</button>
      <h3 style="margin-top: 0; margin-bottom: 1.5rem; color: #00796b; text-align: center;">Edit Product</h3>
      <form id="edit-product-form">
        <input type="hidden" id="edit-product-id">
        <div class="form-group">
          <label for="edit-product-name">Product Name</label>
          <input type="text" id="edit-product-name" required>
        </div>
        <div class="form-group">
          <label for="edit-product-description">Description</label>
          <textarea id="edit-product-description" required></textarea>
        </div>
        <div class="form-group">
          <label for="edit-product-price">Price (Rs.)</label>
          <input type="number" id="edit-product-price" step="0.01" min="0" required>
        </div>
        <div class="form-group">
          <label for="edit-product-category">Category</label>
          <select id="edit-product-category" required>
            <option value="">Select Category</option>
            <option value="Pain Relief">Pain Relief</option>
            <option value="Heart Health">Heart Health</option>
            <option value="Respiratory">Respiratory</option>
            <option value="Mental Health">Mental Health</option>
            <option value="Antibiotics">Antibiotics</option>
            <option value="Vitamins">Vitamins</option>
            <option value="Infant Nutrition">Infant Nutrition</option>
            <option value="Herbal">Herbal</option>
            <option value="Cosmetics">Cosmetics</option>
            <option value="General Store">General Store</option>
          </select>
        </div>
        <div class="form-group checkbox-group">
          <input type="checkbox" id="edit-product-generic">
          <label for="edit-product-generic">Generic Medicine</label>
        </div>
        <div class="form-group">
          <label for="edit-product-image">Image URL</label>
          <input type="url" id="edit-product-image" required>
        </div>
        <button type="submit" class="save-product-btn" style="background-color: #00796b; color: white; border: none; padding: 0.75rem 0; width: 100%; font-size: 1.1rem; border-radius: 4px; cursor: pointer; font-weight: 600; margin-top: 1rem;">Save Changes</button>
      </form>
    </div>
  </div>

  <!-- Add a modal for viewing feedback details -->
  <div id="view-feedback-modal" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 8000; justify-content: center; align-items: center;">
    <div class="modal-content" style="background-color: white; border-radius: 8px; max-width: 600px; width: 100%; padding: 2rem; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
      <button class="close-button" id="close-feedback-modal" style="position: absolute; top: 1rem; right: 1.25rem; background: none; border: none; font-size: 1.5rem; color: #777; cursor: pointer;">&times;</button>
      <h3 style="margin-top: 0; margin-bottom: 1.5rem; color: #00796b; text-align: center;">Message Details</h3>
      <div id="feedback-details">
        <!-- Feedback details will be populated here -->
      </div>
      <div style="display: flex; justify-content: space-between; margin-top: 1.5rem;">
        <button id="mark-read-btn" style="background-color: #00796b; color: white; border: none; padding: 0.6rem 1rem; font-size: 0.9rem; border-radius: 4px; cursor: pointer;">Mark as Read</button>
        <button id="delete-feedback-btn" style="background-color: #f44336; color: white; border: none; padding: 0.6rem 1rem; font-size: 0.9rem; border-radius: 4px; cursor: pointer;">Delete</button>
      </div>
    </div>
  </div>

  <script>
    // Data - example medicine products
    const products = [
      {
        id: 1,
        name: 'Paracetamol 500mg',
        description: 'Effective pain reliever and fever reducer.',
        price: 120,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Pain Relief'
      },
      {
        id: 2,
        name: 'Cetirizine 10mg',
        description: 'Antihistamine used for allergy relief and hives.',
        price: 180,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Respiratory'
      },
      {
        id: 3,
        name: 'Amoxicillin 500mg',
        description: 'Antibiotic used for treating bacterial infections.',
        price: 250,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Antibiotics'
      },
      {
        id: 4,
        name: 'Ibuprofen 200mg',
        description: 'Nonsteroidal anti-inflammatory drug (NSAID) for pain and inflammation.',
        price: 150,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Pain Relief'
      },
      {
        id: 5,
        name: 'Naproxen 500mg',
        description: 'Nonsteroidal anti-inflammatory drug (NSAID) for pain and inflammation.',
        price: 160,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Pain Relief'
      },
      {
        id: 6,
        name: 'Doxycycline 100mg',
        description: 'Antibiotic used for treating bacterial infections.',
        price: 200,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Antibiotics'
      },
      {
        id: 7,
        name: 'Metformin 500mg',
        description: 'Antidiabetic medication used for treating type 2 diabetes.',
        price: 5.99,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Heart Health'
      },
      {
        id: 8,
        name: 'Simvastatin 20mg',
        description: 'HMG-CoA reductase inhibitor used for treating high cholesterol.',
        price: 11.99,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Heart Health'
      },
      {
        id: 9,
        name: 'Hydrochlorothiazide 25mg',
        description: 'Diuretic used for treating high blood pressure.',
        price: 4.99,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Heart Health'
      },
      {
        id: 10,
        name: 'Albuterol 90mcg',
        description: 'Bronchodilator used for treating asthma and COPD.',
        price: 8.99,
        image: 'https://images.unsplash.com/photo-1580281658620-f7d75326912c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60',
        category: 'Respiratory'
      }
    ];
    
    // Cart data
    let cartItems = [];
    let selectedCategory = null;
    
    // DOM elements
    const productContainer = document.getElementById('product-list');
    const cartButton = document.getElementById('cart-button');
    const cartOverlay = document.getElementById('cart-overlay');
    const closeCartButton = document.getElementById('close-cart');
    const cartItemsContainer = document.getElementById('cart-items');
    const cartCount = document.getElementById('cart-count');
    const cartItemCount = document.getElementById('cart-item-count');
    const totalPrice = document.getElementById('total-price');
    const checkoutButton = document.getElementById('checkout-button');
    const loginButton = document.getElementById('login-button');
    const userModalOverlay = document.getElementById('user-modal-overlay');
    const closeUserModalButton = document.getElementById('close-user-modal');
    const loginForm = document.getElementById('login-form');
    const searchForm = document.getElementById('search-form');
    const searchInput = document.getElementById('search-input');
    const categoryCards = document.querySelectorAll('.category-card');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mainNav = document.getElementById('main-nav');
    const prescriptionBtn = document.getElementById('nav-prescription');
    const prescriptionModalOverlay = document.getElementById('prescription-modal-overlay');
    const closePrescriptionModal = document.getElementById('close-prescription-modal');
    const prescriptionFileInput = document.getElementById('prescription-file-input');
    const prescriptionForm = document.querySelector('.prescription-contact-form');
    
    // Function to populate product list
    function populateProductList(products) {
      productContainer.innerHTML = '';
      
      if (products.length === 0) {
        const noProducts = document.createElement('div');
        noProducts.className = 'no-products';
        noProducts.textContent = 'No products found matching your criteria.';
        productContainer.appendChild(noProducts);
        return;
      }
      
      products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
        productCard.setAttribute('data-id', product.id);
        productCard.innerHTML = `
          <img src="${product.image}" alt="${product.name}" class="product-image">
          <div class="product-info">
            <h3>${product.name}</h3>
            <p>${product.description}</p>
            <p class="product-price">Rs.${product.price.toFixed(2)}</p>
            <div class="product-quantity-controls">
              <label for="qty-${product.id}">Quantity:</label>
              <div class="quantity-selector">
                <button type="button" class="qty-btn qty-decrease-btn" data-id="${product.id}">-</button>
                <input type="number" id="qty-${product.id}" class="qty-input" value="1" min="1" max="99">
                <button type="button" class="qty-btn qty-increase-btn" data-id="${product.id}">+</button>
              </div>
            </div>
            <button class="add-to-cart-button" data-id="${product.id}">Add to Cart</button>
          </div>
        `;
        productContainer.appendChild(productCard);
      });
      
      // Add event listeners to quantity buttons in product cards
      document.querySelectorAll('.qty-decrease-btn').forEach(button => {
        button.addEventListener('click', function() {
          const productId = parseInt(this.getAttribute('data-id'));
          const input = document.getElementById(`qty-${productId}`);
          let value = parseInt(input.value);
          if (value > 1) {
            input.value = value - 1;
          }
        });
      });
      
      document.querySelectorAll('.qty-increase-btn').forEach(button => {
        button.addEventListener('click', function() {
          const productId = parseInt(this.getAttribute('data-id'));
          const input = document.getElementById(`qty-${productId}`);
          let value = parseInt(input.value);
          if (value < 99) {
            input.value = value + 1;
          }
        });
      });
      
      // Prevent manual input of invalid values
      document.querySelectorAll('.qty-input').forEach(input => {
        input.addEventListener('change', function() {
          let value = parseInt(this.value);
          if (isNaN(value) || value < 1) {
            this.value = 1;
          } else if (value > 99) {
            this.value = 99;
          }
        });
      });
      
      // Add event listeners to Add to Cart buttons
      document.querySelectorAll('.add-to-cart-button').forEach(button => {
        button.addEventListener('click', function(e) {
          e.stopPropagation();
          const productId = parseInt(this.getAttribute('data-id'));
          const quantityInput = document.getElementById(`qty-${productId}`);
          const quantity = parseInt(quantityInput.value);
          
          // Validate quantity
          if (isNaN(quantity) || quantity < 1) {
            alert('Please select a valid quantity');
            return;
          }
          
          addToCart(productId, quantity);
          
          // Reset quantity to 1 after adding to cart
          quantityInput.value = 1;
        });
      });
    }
    
    // Filter products by category
    function filterProducts(category) {
      if (!category) {
        return products;
      }
      return products.filter(product => product.category === category);
    }
    
    // Search products
    function searchProducts(query) {
      if (!query) {
        return filterProducts(selectedCategory);
      }
      
      const searchQuery = query.toLowerCase();
      const filteredProducts = products.filter(product => {
        const matchesQuery = product.name.toLowerCase().includes(searchQuery) || 
                            product.description.toLowerCase().includes(searchQuery);
        const matchesCategory = !selectedCategory || product.category === selectedCategory;
        
        return matchesQuery && matchesCategory;
      });
      
      return filteredProducts;
    }
    
    // Add to cart function
    function addToCart(productId, quantity = 1) {
      const product = products.find(p => p.id === productId);
      if (!product) return;
      
      // Ensure quantity is a valid number
      quantity = parseInt(quantity);
      if (isNaN(quantity) || quantity < 1) {
        quantity = 1;
      }
      
      const existingItem = cartItems.find(item => item.id === productId);
      if (existingItem) {
        existingItem.quantity += quantity;
      } else {
        cartItems.push({
          id: product.id,
          name: product.name,
          price: product.price,
          image: product.image,
          quantity: quantity
        });
      }
      
      updateCart();
      
      // Show brief notification
      const notification = document.createElement('div');
      notification.className = 'cart-notification';
      notification.textContent = `${quantity} ${quantity > 1 ? 'units' : 'unit'} of ${product.name} added to cart`;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.classList.add('show');
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => {
            notification.remove();
          }, 300);
        }, 2000);
      }, 10);
    }
    
    // Update cart display
    function updateCart() {
      // Update cart count
      const totalItems = cartItems.reduce((total, item) => total + item.quantity, 0);
      cartCount.textContent = totalItems;
      cartItemCount.textContent = totalItems;
      
      // Update cart items
      cartItemsContainer.innerHTML = '';
      if (cartItems.length === 0) {
        cartItemsContainer.innerHTML = '<p>Your cart is empty.</p>';
      } else {
        cartItems.forEach(item => {
          const cartItemElement = document.createElement('div');
          cartItemElement.className = 'cart-item';
          cartItemElement.innerHTML = `
            <img src="${item.image}" alt="${item.name}">
            <div class="cart-item-details">
              <h4>${item.name}</h4>
              <p>Rs.${item.price.toFixed(2)}</p>
            </div>
            <div class="cart-item-qty">
              <button class="qty-decrease" data-id="${item.id}">-</button>
              <span>${item.quantity}</span>
              <button class="qty-increase" data-id="${item.id}">+</button>
            </div>
          `;
          cartItemsContainer.appendChild(cartItemElement);
        });
        
        // Add event listeners to quantity buttons
        cartItemsContainer.querySelectorAll('.qty-decrease').forEach(button => {
          button.addEventListener('click', function() {
            const itemId = parseInt(this.getAttribute('data-id'));
            decreaseQuantity(itemId);
          });
        });
        
        cartItemsContainer.querySelectorAll('.qty-increase').forEach(button => {
          button.addEventListener('click', function() {
            const itemId = parseInt(this.getAttribute('data-id'));
            increaseQuantity(itemId);
          });
        });
      }
      
      // Update total price
      const total = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      totalPrice.textContent = `Total: Rs.${total.toFixed(2)}`;
      
      // Local storage save
      localStorage.setItem('cartItems', JSON.stringify(cartItems));
    }
    
    // Increase item quantity
    function increaseQuantity(itemId) {
      const item = cartItems.find(item => item.id === itemId);
      if (item) {
        item.quantity += 1;
        updateCart();
      }
    }
    
    // Decrease item quantity
    function decreaseQuantity(itemId) {
      const itemIndex = cartItems.findIndex(item => item.id === itemId);
      if (itemIndex > -1) {
        if (cartItems[itemIndex].quantity > 1) {
          cartItems[itemIndex].quantity -= 1;
        } else {
          cartItems.splice(itemIndex, 1);
        }
        updateCart();
      }
    }
    
    // Initialize
    function init() {
      // Load cart from local storage
      const savedCart = localStorage.getItem('cartItems');
      if (savedCart) {
        cartItems = JSON.parse(savedCart);
        updateCart();
      }
      
      // Populate products
      populateProductList(products);
      
      // Cart button event
      cartButton.addEventListener('click', function() {
        cartOverlay.style.display = 'flex';
        setTimeout(() => {
          cartOverlay.style.opacity = '1';
        }, 10);
      });
      
      // Close cart button event
      closeCartButton.addEventListener('click', function() {
        cartOverlay.style.opacity = '0';
        setTimeout(() => {
          cartOverlay.style.display = 'none';
        }, 300);
      });
      
      // Login button event
      loginButton.addEventListener('click', function() {
        userModalOverlay.style.display = 'flex';
        setTimeout(() => {
          userModalOverlay.style.opacity = '1';
        }, 10);
      });
      
      // Close login modal button event
      closeUserModalButton.addEventListener('click', function() {
        userModalOverlay.style.opacity = '0';
        setTimeout(() => {
          userModalOverlay.style.display = 'none';
        }, 300);
      });
      
      // Login form submit event
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        // Simulate login success
        alert('Login successful');
        userModalOverlay.style.opacity = '0';
        setTimeout(() => {
          userModalOverlay.style.display = 'none';
        }, 300);
      });
      
      // Search form submit event
      searchForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const query = searchInput.value.trim();
        const searchResults = searchProducts(query);
        populateProductList(searchResults);
      });
      
      // Category filter event
      categoryCards.forEach(card => {
        card.addEventListener('click', function() {
          const category = this.querySelector('.category-name').textContent;
          
          // Toggle selected category
          if (selectedCategory === category) {
            selectedCategory = null;
            categoryCards.forEach(c => c.classList.remove('active'));
          } else {
            selectedCategory = category;
            categoryCards.forEach(c => c.classList.remove('active'));
            this.classList.add('active');
          }
          
          const filteredProducts = filterProducts(selectedCategory);
          populateProductList(filteredProducts);
        });
      });
      
      // Mobile menu toggle
      mobileMenuButton.addEventListener('click', function() {
        mainNav.classList.toggle('active');
      });
      
      // Prescription upload button
      prescriptionBtn.addEventListener('click', function(e) {
        e.preventDefault();
        prescriptionModalOverlay.style.display = 'flex';
        setTimeout(() => {
          prescriptionModalOverlay.style.opacity = '1';
        }, 10);
      });
      
      // Close prescription modal
      closePrescriptionModal.addEventListener('click', function() {
        prescriptionModalOverlay.style.opacity = '0';
        setTimeout(() => {
          prescriptionModalOverlay.style.display = 'none';
        }, 300);
      });
      
      // Prescription file input change
      prescriptionFileInput.addEventListener('change', function() {
        if (this.files.length > 0) {
          const fileName = this.files[0].name;
          const uploadText = document.querySelector('.prescription-upload-text');
          uploadText.textContent = `Selected: ${fileName}`;
        }
      });
      
      // Prescription form submit
      prescriptionForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        if (!prescriptionFileInput.files.length) {
          alert('Please upload a prescription file');
          return;
        }
        
        // Simulate submission success
        alert('Your prescription has been uploaded. We will contact you shortly to confirm your order.');
        prescriptionModalOverlay.style.opacity = '0';
        setTimeout(() => {
          prescriptionModalOverlay.style.display = 'none';
          // Reset form
          prescriptionForm.reset();
          prescriptionFileInput.value = '';
          document.querySelector('.prescription-upload-text').textContent = 'Click to upload your prescription';
        }, 300);
      });
      
      // Initialize seller dashboard
      initSellerDashboard();
      
      // Initialize product management
      initProductManagement();
      
      // Close modals when clicking outside
      window.addEventListener('click', function(e) {
        if (e.target === cartOverlay) {
          cartOverlay.style.opacity = '0';
          setTimeout(() => {
            cartOverlay.style.display = 'none';
          }, 300);
        } else if (e.target === userModalOverlay) {
          userModalOverlay.style.opacity = '0';
          setTimeout(() => {
            userModalOverlay.style.display = 'none';
          }, 300);
        } else if (e.target === prescriptionModalOverlay) {
          prescriptionModalOverlay.style.opacity = '0';
          setTimeout(() => {
            prescriptionModalOverlay.style.display = 'none';
          }, 300);
        } else if (e.target === document.getElementById('seller-dashboard-overlay')) {
          document.getElementById('seller-dashboard-overlay').style.opacity = '0';
          setTimeout(() => {
            document.getElementById('seller-dashboard-overlay').style.display = 'none';
          }, 300);
        }
      });
      
      // Checkout button with improved error handling and validation
      checkoutButton.addEventListener('click', function() {
        if (cartItems.length === 0) {
          alert('Your cart is empty');
          return;
        }
        
        // Validate all cart items have proper values
        let hasInvalidItems = false;
        cartItems.forEach(item => {
          if (isNaN(parseFloat(item.price)) || isNaN(parseInt(item.quantity)) || !item.name) {
            console.error("Invalid item in cart:", item);
            hasInvalidItems = true;
          }
        });
        
        if (hasInvalidItems) {
          alert('There are invalid items in your cart. Please refresh the page and try again.');
          return;
        }
        
        try {
          // Check if a checkout modal already exists and remove it
          const existingModal = document.querySelector('.checkout-modal');
          if (existingModal) {
            document.body.removeChild(existingModal);
          }
          
          // Show quick checkout modal instead of alert
          const checkoutModal = document.createElement('div');
          checkoutModal.className = 'checkout-modal';
          checkoutModal.id = 'checkout-modal';
          checkoutModal.innerHTML = `
            <div class="checkout-modal-content">
              <button class="close-button">&times;</button>
              <h3>Quick Checkout</h3>
              <div id="checkout-error" style="color: #d32f2f; text-align: center; margin-bottom: 10px; font-weight: 600; display: none;"></div>
              <form id="checkout-form">
                <div class="form-group">
                  <label for="checkout-name">Full Name</label>
                  <input type="text" id="checkout-name" required>
                </div>
                <div class="form-group">
                  <label for="checkout-phone">Phone Number</label>
                  <input type="tel" id="checkout-phone" pattern="[0-9+\\s-]{10,15}" title="Please enter a valid phone number" required>
                </div>
                <div class="form-group">
                  <label for="checkout-address">Delivery Address</label>
                  <textarea id="checkout-address" required minlength="10"></textarea>
                </div>
                <div class="form-group">
                  <label for="checkout-payment">Payment Method</label>
                  <select id="checkout-payment" required>
                    <option value="cod">Cash on Delivery</option>
                    <option value="bank">Bank Transfer</option>
                    <option value="card">Credit/Debit Card</option>
                  </select>
                </div>
                <div class="order-summary">
                  <h4>Order Summary</h4>
                  <div id="checkout-items"></div>
                  <div class="checkout-total">Total: <span id="checkout-total">Rs.0.00</span></div>
                </div>
                <button type="submit" class="checkout-submit-btn">Place Order</button>
              </form>
            </div>
          `;
          document.body.appendChild(checkoutModal);
          
          // Populate order summary
          const checkoutItems = document.getElementById('checkout-items');
          const checkoutTotal = document.getElementById('checkout-total');
          let total = 0;
          
          if (!checkoutItems || !checkoutTotal) {
            throw new Error("Order summary elements not found");
          }
          
          cartItems.forEach(item => {
            try {
              // Fix: Ensure price is treated as a number by using parseFloat
              const itemPrice = parseFloat(item.price);
              const itemQuantity = parseInt(item.quantity);
              
              if (isNaN(itemPrice) || isNaN(itemQuantity)) {
                console.error("Invalid price or quantity for item:", item);
                return; // Skip this item
              }
              
              const itemTotal = itemPrice * itemQuantity;
              total += itemTotal;
              
              const itemElement = document.createElement('div');
              itemElement.className = 'checkout-item';
              itemElement.innerHTML = `
                <div class="checkout-item-name">${item.name} x${itemQuantity}</div>
                <div class="checkout-item-price">Rs.${itemTotal.toFixed(2)}</div>
              `;
              checkoutItems.appendChild(itemElement);
            } catch (err) {
              console.error("Error processing item:", err);
            }
          });
          
          // Add delivery charge
          const deliveryCharge = 150; // Rs. 150 fixed delivery charge
          total += deliveryCharge;
          
          // Add delivery charge to the order summary
          const deliveryElement = document.createElement('div');
          deliveryElement.className = 'checkout-item delivery-charge';
          deliveryElement.innerHTML = `
            <div class="checkout-item-name">Delivery Charge</div>
            <div class="checkout-item-price">Rs.${deliveryCharge.toFixed(2)}</div>
          `;
          checkoutItems.appendChild(deliveryElement);
          
          checkoutTotal.textContent = `Rs.${total.toFixed(2)}`;
          
          // Add close button event
          const closeButton = checkoutModal.querySelector('.close-button');
          if (closeButton) {
            closeButton.addEventListener('click', function() {
              if (document.body.contains(checkoutModal)) {
                document.body.removeChild(checkoutModal);
              }
            });
          }
          
          // Close modal when clicking outside
          checkoutModal.addEventListener('click', function(e) {
            if (e.target === checkoutModal) {
              document.body.removeChild(checkoutModal);
            }
          });
          
          // Validate each field individually to provide specific error messages
          const validateCheckoutForm = () => {
            const nameField = document.getElementById('checkout-name');
            const phoneField = document.getElementById('checkout-phone');
            const addressField = document.getElementById('checkout-address');
            const errorDiv = document.getElementById('checkout-error');
            
            if (!nameField || !phoneField || !addressField || !errorDiv) {
              throw new Error("Form validation fields not found");
            }
            
            errorDiv.style.display = 'none';
            
            // Check name (minimum 3 characters)
            if (!nameField.value || nameField.value.trim().length < 3) {
              errorDiv.textContent = 'Please enter your full name (minimum 3 characters)';
              errorDiv.style.display = 'block';
              nameField.focus();
              return false;
            }
            
            // Check phone (valid format)
            const phoneRegex = /^[0-9+\s-]{10,15}$/;
            if (!phoneField.value || !phoneRegex.test(phoneField.value)) {
              errorDiv.textContent = 'Please enter a valid phone number';
              errorDiv.style.display = 'block';
              phoneField.focus();
              return false;
            }
            
            // Check address (minimum 10 characters)
            if (!addressField.value || addressField.value.trim().length < 10) {
              errorDiv.textContent = 'Please enter a complete delivery address (minimum 10 characters)';
              errorDiv.style.display = 'block';
              addressField.focus();
              return false;
            }
            
            return true;
          };
          
          // Add form submit event with enhanced validation
          const checkoutForm = document.getElementById('checkout-form');
          if (!checkoutForm) {
            throw new Error("Checkout form not found");
          }
          
          checkoutForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate form
            if (!validateCheckoutForm()) {
              return;
            }
            
            // Show processing message
            const submitBtn = this.querySelector('.checkout-submit-btn');
            if (!submitBtn) {
              throw new Error("Submit button not found");
            }
            
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Processing...';
            submitBtn.disabled = true;
            
            try {
              // Simulate order processing
              setTimeout(() => {
                try {
                  // Get input fields
                  const nameField = document.getElementById('checkout-name');
                  const phoneField = document.getElementById('checkout-phone');
                  const addressField = document.getElementById('checkout-address');
                  const paymentField = document.getElementById('checkout-payment');
                  
                  if (!nameField || !phoneField || !addressField || !paymentField) {
                    throw new Error("Order form fields not found");
                  }
                  
                  // Create order object
                  const order = {
                    id: 'ORD' + Date.now(),
                    items: JSON.parse(JSON.stringify(cartItems)), // Deep copy to avoid reference issues
                    total: total,
                    deliveryCharge: deliveryCharge,
                    customer: {
                      name: nameField.value,
                      phone: phoneField.value,
                      address: addressField.value
                    },
                    paymentMethod: paymentField.value,
                    status: 'pending',
                    date: new Date().toISOString()
                  };
                  
                  // Save order to local storage
                  let orders = [];
                  try {
                    orders = JSON.parse(localStorage.getItem('rasheedOrders') || '[]');
                    if (!Array.isArray(orders)) {
                      orders = [];
                    }
                  } catch (e) {
                    console.error("Error parsing orders from localStorage:", e);
                    orders = [];
                  }
                  
                  orders.push(order);
                  localStorage.setItem('rasheedOrders', JSON.stringify(orders));
                  
                  // Clear cart
                  cartItems = [];
                  localStorage.setItem('cartItems', JSON.stringify(cartItems));
                  updateCart();
                  
                  // Remove checkout modal
                  if (document.body.contains(checkoutModal)) {
                    document.body.removeChild(checkoutModal);
                  }
                  
                  // Check if a thank you notification already exists and remove it
                  const existingThankYou = document.querySelector('.enhanced-thank-you');
                  if (existingThankYou) {
                    document.body.removeChild(existingThankYou);
                  }
                  
                  // Show enhanced thank you notification with animation and order details
                  const thankYouNotif = document.createElement('div');
                  thankYouNotif.className = 'enhanced-thank-you';
                  thankYouNotif.innerHTML = `
                    <div class="confetti-container" id="confetti-container"></div>
                    <div class="thank-you-container">
                      <div class="thank-you-icon">
                        <div class="checkmark-circle">
                          <div class="checkmark-stem"></div>
                          <div class="checkmark-kick"></div>
                        </div>
                      </div>
                      <h2>Thank You for Your Order!</h2>
                      <p class="order-number">Order #${order.id}</p>
                      <div class="order-details">
                        <p>We've received your order and will process it right away.</p>
                        <p>A confirmation has been sent to your phone number.</p>
                        <p>Our team will contact you shortly to confirm delivery details.</p>
                      </div>
                      <div class="order-summary">
                        <p><span>Order Total:</span> <span>Rs.${total.toFixed(2)}</span></p>
                        <p><span>Items:</span> <span>Rs.${(total - deliveryCharge).toFixed(2)}</span></p>
                        <p><span>Delivery:</span> <span>Rs.${deliveryCharge.toFixed(2)}</span></p>
                      </div>
                      <div class="delivery-info">
                        <p><i class="fas fa-truck"></i> Estimated delivery: Within 24 hours</p>
                        <p><i class="fas fa-phone"></i> For any questions, call us at +92 307 2750177</p>
                      </div>
                      <button class="close-thank-you">Continue Shopping</button>
                    </div>
                  `;
                  document.body.appendChild(thankYouNotif);
                  
                  // Set up thank you notification interactions
                  const setupThankYouNotification = () => {
                    // Add close button event
                    const closeThankYouBtn = thankYouNotif.querySelector('.close-thank-you');
                    if (closeThankYouBtn) {
                      closeThankYouBtn.addEventListener('click', function() {
                        thankYouNotif.classList.remove('show');
                        setTimeout(() => {
                          if (document.body.contains(thankYouNotif)) {
                            document.body.removeChild(thankYouNotif);
                          }
                        }, 300);
                      });
                    }
                    
                    // Close notification when clicking outside
                    thankYouNotif.addEventListener('click', function(e) {
                      if (e.target === thankYouNotif) {
                        thankYouNotif.classList.remove('show');
                        setTimeout(() => {
                          if (document.body.contains(thankYouNotif)) {
                            document.body.removeChild(thankYouNotif);
                          }
                        }, 300);
                      }
                    });
                    
                    // Add animation classes for transition effect
                    setTimeout(() => {
                      thankYouNotif.classList.add('show');
                      const container = thankYouNotif.querySelector('.thank-you-container');
                      if (container) {
                        container.classList.add('show');
                      }
                    }, 10);
                    
                    // Auto close after 10 seconds
                    setTimeout(() => {
                      if (document.body.contains(thankYouNotif)) {
                        thankYouNotif.classList.remove('show');
                        setTimeout(() => {
                          if (document.body.contains(thankYouNotif)) {
                            document.body.removeChild(thankYouNotif);
                          }
                        }, 300);
                      }
                    }, 10000);
                  };
                  
                  // Initialize the thank you notification
                  setupThankYouNotification();
                  
                  // Play success sound
                  try {
                    const successSound = document.getElementById('order-success-sound');
                    if (successSound) {
                      successSound.volume = 0.5; // Set volume to 50%
                      const playPromise = successSound.play();
                      
                      // Handle play failures (e.g., browsers that require user interaction before audio can play)
                      if (playPromise !== undefined) {
                        playPromise.catch(error => {
                          console.log('Auto-play of sound was prevented:', error);
                          // We don't need to show an error to the user for this
                        });
                      }
                    }
                  } catch (e) {
                    console.log('Error playing sound:', e);
                    // Continue with the rest of the function even if sound fails
                  }
                  
                  // Create confetti animation
                  try {
                    const confettiContainer = document.getElementById('confetti-container');
                    if (confettiContainer) {
                      // Create 100 confetti pieces
                      for (let i = 0; i < 100; i++) {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        
                        // Randomize confetti appearance and animation
                        const size = Math.random() * 8 + 4; // 4-12px size
                        const translateX = (Math.random() - 0.5) * 500; // Random horizontal drift
                        const animationDuration = Math.random() * 3 + 2; // 2-5s duration
                        const left = Math.random() * 100; // Random horizontal position
                        
                        confetti.style.width = `${size}px`;
                        confetti.style.height = `${size}px`;
                        confetti.style.left = `${left}%`;
                        confetti.style.setProperty('--translate-x', `${translateX}px`);
                        confetti.style.animationDuration = `${animationDuration}s`;
                        
                        confettiContainer.appendChild(confetti);
                      }
                      
                      // Remove confetti after animation to free up resources
                      setTimeout(() => {
                        if (confettiContainer.parentNode) {
                          confettiContainer.innerHTML = '';
                        }
                      }, 5000);
                    }
                  } catch (e) {
                    console.log('Error creating confetti:', e);
                    // Continue with the function even if confetti fails
                  }
                  
                  // Add animation classes after a small delay for the animation to trigger
                  setTimeout(() => {
                    thankYouNotif.classList.add('show');
                    const container = thankYouNotif.querySelector('.thank-you-container');
                    if (container) {
                      container.classList.add('show');
                    }
                  }, 10);
                  
                  // Add close button event
                  const closeThankYouBtn = thankYouNotif.querySelector('.close-thank-you');
                  if (closeThankYouBtn) {
                    closeThankYouBtn.addEventListener('click', function() {
                      thankYouNotif.classList.remove('show');
                      setTimeout(() => {
                        if (document.body.contains(thankYouNotif)) {
                          document.body.removeChild(thankYouNotif);
                        }
                      }, 300);
                    });
                  }
                  
                  // Auto close after 10 seconds
                  setTimeout(() => {
                    if (document.body.contains(thankYouNotif)) {
                      thankYouNotif.classList.remove('show');
                      setTimeout(() => {
                        if (document.body.contains(thankYouNotif)) {
                          document.body.removeChild(thankYouNotif);
                        }
                      }, 300);
                    }
                  }, 10000);
                  
                  // Close cart overlay
                  cartOverlay.style.opacity = '0';
                  setTimeout(() => {
                    cartOverlay.style.display = 'none';
                  }, 300);
                } catch (error) {
                  console.error("Error processing order:", error);
                  // Show error message
                  const errorDiv = document.getElementById('checkout-error');
                  if (errorDiv) {
                    errorDiv.textContent = 'Error processing your order. Please try again.';
                    errorDiv.style.display = 'block';
                  } else {
                    alert('Error processing your order. Please try again.');
                  }
                  
                  // Reset submit button
                  if (submitBtn) {
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                  }
                }
              }, 800); // Simulate processing time
            } catch (error) {
              console.error("Error in order submission:", error);
              // Reset submit button
              submitBtn.textContent = originalText;
              submitBtn.disabled = false;
              
              // Show error message
              const errorDiv = document.getElementById('checkout-error');
              if (errorDiv) {
                errorDiv.textContent = 'An unexpected error occurred. Please try again.';
                errorDiv.style.display = 'block';
              } else {
                alert('An unexpected error occurred. Please try again.');
              }
            }
          });
        } catch (error) {
          console.error("Error showing checkout modal:", error);
          alert('Error opening checkout. Please try again or contact customer support.');
        }
      });
    }
    
    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
    
    // Seller Dashboard functionality
    function initSellerDashboard() {
      const sellerDashboardLink = document.getElementById('seller-dashboard-link');
      const dashboardOverlay = document.getElementById('seller-dashboard-overlay');
      const sellerLoginOverlay = document.getElementById('seller-login-overlay');
      const closeDashboardBtn = document.getElementById('close-dashboard');
      const closeSellerLoginBtn = document.getElementById('close-seller-login');
      const sellerLoginForm = document.getElementById('seller-login-form');
      const dashboardMenuItems = document.querySelectorAll('.dashboard-menu li');
      const tabContents = document.querySelectorAll('.tab-content');
      
      // Admin credentials (in a real app, this would be handled securely on the server)
      const adminCredentials = {
        username: 'admin',
        password: 'rasheedsons123'
      };
      
      // Dashboard open/close with authentication
      sellerDashboardLink.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Check if already authenticated
        if (localStorage.getItem('adminAuthenticated') === 'true') {
          openDashboard();
        } else {
          // Show login modal
          sellerLoginOverlay.style.display = 'flex';
          setTimeout(() => {
            sellerLoginOverlay.style.opacity = '1';
          }, 10);
        }
      });
      
      // Handle login form submission
      sellerLoginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const username = document.getElementById('seller-username').value;
        const password = document.getElementById('seller-password').value;
        const errorElement = document.getElementById('seller-login-error');
        
        // Validate credentials (in a real app, this would be a server request)
        if (username === adminCredentials.username && password === adminCredentials.password) {
          // Store authentication state
          localStorage.setItem('adminAuthenticated', 'true');
          localStorage.setItem('adminLastLogin', new Date().toISOString());
          
          // Close login modal and open dashboard
          sellerLoginOverlay.style.opacity = '0';
          setTimeout(() => {
            sellerLoginOverlay.style.display = 'none';
            sellerLoginForm.reset();
            errorElement.textContent = '';
            openDashboard();
          }, 300);
        } else {
          // Show error
          errorElement.textContent = 'Invalid username or password';
          // Shake effect
          sellerLoginForm.classList.add('shake');
          setTimeout(() => {
            sellerLoginForm.classList.remove('shake');
          }, 500);
        }
      });
      
      // Close login modal
      closeSellerLoginBtn.addEventListener('click', function() {
        sellerLoginOverlay.style.opacity = '0';
        setTimeout(() => {
          sellerLoginOverlay.style.display = 'none';
        }, 300);
      });
      
      // Function to open dashboard
      function openDashboard() {
        dashboardOverlay.style.display = 'block';
        setTimeout(() => {
          dashboardOverlay.style.opacity = '1';
        }, 10);
        
        // Load dashboard data
        loadDashboardData();
        
        // Update last login information
        updateLastLoginInfo();
        
        // Initialize security features
        initializeSessionTimeout();
      }
      
      // Function to update last login info
      function updateLastLoginInfo() {
        const lastLogin = localStorage.getItem('adminLastLogin');
        if (lastLogin) {
          const lastLoginDate = new Date(lastLogin);
          const formattedDate = `${lastLoginDate.toLocaleDateString()} at ${lastLoginDate.toLocaleTimeString()}`;
          
          // Add last login info to the dashboard if element exists
          const lastLoginElement = document.getElementById('last-login-info');
          if (lastLoginElement) {
            lastLoginElement.textContent = `Last login: ${formattedDate}`;
          }
        }
      }
      
      // Add logout button event
      const logoutBtn = document.getElementById('admin-logout');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', function() {
          // Clear authentication
          localStorage.removeItem('adminAuthenticated');
          
          // Close dashboard
          dashboardOverlay.style.opacity = '0';
          setTimeout(() => {
            dashboardOverlay.style.display = 'none';
          }, 300);
          
          // Show confirmation
          alert('You have been logged out successfully');
        });
      }
      
      // Close dashboard button event
      closeDashboardBtn.addEventListener('click', function() {
        dashboardOverlay.style.opacity = '0';
        setTimeout(() => {
          dashboardOverlay.style.display = 'none';
        }, 300);
      });
      
      // Tab switching
      dashboardMenuItems.forEach(item => {
        item.addEventListener('click', function() {
          const tabId = this.getAttribute('data-tab');
          
          // Update active menu item
          dashboardMenuItems.forEach(i => i.classList.remove('active'));
          this.classList.add('active');
          
          // Update active tab
          tabContents.forEach(tab => {
            if (tab.id === tabId) {
              tab.classList.add('active');
            } else {
              tab.classList.remove('active');
            }
          });
        });
      });
      
      // Order filter functionality
      const orderFilter = document.getElementById('order-filter');
      if (orderFilter) {
        orderFilter.addEventListener('change', function() {
          const status = this.value;
          filterOrders(status);
        });
      }
      
      // Order search functionality
      const orderSearch = document.getElementById('order-search');
      if (orderSearch) {
        orderSearch.addEventListener('input', function() {
          const query = this.value.trim().toLowerCase();
          searchOrders(query);
        });
      }
      
      // Export orders button
      const exportOrdersBtn = document.getElementById('export-orders-btn');
      if (exportOrdersBtn) {
        exportOrdersBtn.addEventListener('click', function() {
          exportOrdersAsCSV();
        });
      }
      
      // Customer search functionality
      const customerSearch = document.getElementById('customer-search');
      if (customerSearch) {
        customerSearch.addEventListener('input', function() {
          const query = this.value.trim().toLowerCase();
          searchCustomers(query);
        });
      }
      
      // Settings form submission
      const saveSettingsBtn = document.querySelector('.save-settings-btn');
      if (saveSettingsBtn) {
        saveSettingsBtn.addEventListener('click', function() {
          // Simulate saving settings
          alert('Store settings saved successfully!');
        });
      }
      
      // Add product button
      const addProductBtn = document.getElementById('add-product-btn');
      if (addProductBtn) {
        addProductBtn.addEventListener('click', function() {
          openAddProductModal();
        });
      }
      
      // Password change functionality
      const changePasswordBtn = document.querySelector('.change-password-btn');
      if (changePasswordBtn) {
        changePasswordBtn.addEventListener('click', function() {
          const currentPassword = document.getElementById('current-password').value;
          const newPassword = document.getElementById('new-password').value;
          const confirmPassword = document.getElementById('confirm-password').value;
          const errorElement = document.getElementById('password-change-error');
          
          // Clear previous error
          errorElement.textContent = '';
          
          // Validate current password
          if (currentPassword !== adminCredentials.password) {
            errorElement.textContent = 'Current password is incorrect';
            return;
          }
          
          // Validate new password
          if (newPassword.length < 6) {
            errorElement.textContent = 'New password must be at least 6 characters';
            return;
          }
          
          // Validate passwords match
          if (newPassword !== confirmPassword) {
            errorElement.textContent = 'New passwords do not match';
            return;
          }
          
          // Update password (in a real app, this would be done securely on a server)
          adminCredentials.password = newPassword;
          
          // Clear form and show success
          document.getElementById('current-password').value = '';
          document.getElementById('new-password').value = '';
          document.getElementById('confirm-password').value = '';
          
          alert('Password updated successfully!');
        });
      }
      
      // Security settings
      const saveSecurityBtn = document.querySelector('.save-security-btn');
      if (saveSecurityBtn) {
        saveSecurityBtn.addEventListener('click', function() {
          const sessionTimeout = parseInt(document.getElementById('session-timeout').value);
          const autoLogout = document.getElementById('auto-logout').checked;
          
          // Save settings to localStorage
          localStorage.setItem('sessionTimeout', sessionTimeout);
          localStorage.setItem('autoLogout', autoLogout);
          
          // Apply new timeout setting
          if (autoLogout) {
            setupSessionTimeout(sessionTimeout);
          } else {
            clearSessionTimeout();
          }
          
          alert('Security settings saved successfully!');
        });
      }
      
      // Session timeout functionality
      let sessionTimeoutId;
      
      function setupSessionTimeout(minutes) {
        // Clear any existing timeout
        clearSessionTimeout();
        
        // Set new timeout
        if (minutes && minutes > 0) {
          const milliseconds = minutes * 60 * 1000;
          sessionTimeoutId = setTimeout(logoutDueToInactivity, milliseconds);
        }
      }
      
      function clearSessionTimeout() {
        if (sessionTimeoutId) {
          clearTimeout(sessionTimeoutId);
        }
      }
      
      function resetSessionTimeout() {
        const autoLogout = localStorage.getItem('autoLogout') === 'true';
        const timeout = parseInt(localStorage.getItem('sessionTimeout')) || 30;
        
        if (autoLogout) {
          setupSessionTimeout(timeout);
        }
      }
      
      function logoutDueToInactivity() {
        // Clear authentication
        localStorage.removeItem('adminAuthenticated');
        
        // Close dashboard
        dashboardOverlay.style.opacity = '0';
        setTimeout(() => {
          dashboardOverlay.style.display = 'none';
        }, 300);
        
        // Show message
        alert('You have been logged out due to inactivity.');
      }
      
      // Reset timeout on user interaction within dashboard
      dashboardOverlay.addEventListener('mousemove', resetSessionTimeout);
      dashboardOverlay.addEventListener('click', resetSessionTimeout);
      dashboardOverlay.addEventListener('keypress', resetSessionTimeout);
      
      // Initialize session timeout from settings
      function initializeSessionTimeout() {
        const autoLogout = localStorage.getItem('autoLogout') === 'true' || true; // Default to true
        const timeout = parseInt(localStorage.getItem('sessionTimeout')) || 30; // Default to 30 minutes
        
        // Set form values
        if (document.getElementById('session-timeout')) {
          document.getElementById('session-timeout').value = timeout;
        }
        
        if (document.getElementById('auto-logout')) {
          document.getElementById('auto-logout').checked = autoLogout;
        }
        
        // Set up timeout if enabled
        if (autoLogout) {
          setupSessionTimeout(timeout);
        }
      }
      
      // Handle order status change
      const ordersList = document.getElementById('orders-list');
      if (ordersList) {
        ordersList.addEventListener('click', function(e) {
          // Find the button or its icon if clicked
          const button = e.target.closest('.status-change-btn');
          if (button) {
            const orderId = button.getAttribute('data-order-id');
            const newStatus = button.getAttribute('data-status');
            changeOrderStatus(orderId, newStatus);
          } else if (e.target.classList.contains('view-order-btn') || e.target.closest('.view-order-btn')) {
            // Get the order ID from the button
            const viewButton = e.target.closest('.view-order-btn');
            if (viewButton) {
              const orderId = viewButton.getAttribute('data-order-id');
              viewOrderDetails(orderId);
            }
          }
        });
      }
    }
    
    // Load dashboard data
    function loadDashboardData() {
      // Get orders from local storage
      const orders = JSON.parse(localStorage.getItem('rasheedOrders') || '[]');
      
      // Update order stats
      if (document.getElementById('total-orders')) {
        document.getElementById('total-orders').textContent = orders.length;
      }
      
      // Calculate total revenue
      let totalRevenue = 0;
      orders.forEach(order => {
        totalRevenue += order.total;
      });
      
      if (document.getElementById('total-revenue')) {
        document.getElementById('total-revenue').textContent = `Rs.${totalRevenue.toFixed(2)}`;
      }
      
      // Count pending orders
      const pendingOrders = orders.filter(order => order.status === 'pending').length;
      if (document.getElementById('pending-orders')) {
        document.getElementById('pending-orders').textContent = pendingOrders;
      }
      
      // Count unique customers
      const uniqueCustomers = new Set();
      orders.forEach(order => {
        if (order.customer && order.customer.phone) {
          uniqueCustomers.add(order.customer.phone); // Use phone as unique identifier
        }
      });
      
      if (document.getElementById('total-customers')) {
        document.getElementById('total-customers').textContent = uniqueCustomers.size;
      }
      
      // Populate orders table
      populateOrdersTable(orders);
      
      // Populate products grid
      populateProductsGrid(products);
      
      // Populate customers table
      populateCustomersTable(orders);
      
      // Populate top products table
      populateTopProducts(orders);
    }
    
    // Populate orders table
    function populateOrdersTable(orders) {
      const ordersList = document.getElementById('orders-list');
      if (!ordersList) return;
      
      ordersList.innerHTML = '';
      
      if (orders.length === 0) {
        const emptyRow = document.createElement('tr');
        emptyRow.innerHTML = '<td colspan="7" style="text-align: center;">No orders found</td>';
        ordersList.appendChild(emptyRow);
        return;
      }
      
      // Sort orders by date, newest first
      orders.sort((a, b) => new Date(b.date) - new Date(a.date));
      
      orders.forEach(order => {
        const row = document.createElement('tr');
        row.setAttribute('data-order-id', order.id);
        row.setAttribute('data-status', order.status || 'pending');
        
        const date = new Date(order.date);
        const formattedDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;
        
        const itemsCount = order.items.reduce((total, item) => total + item.quantity, 0);
        
        row.innerHTML = `
          <td>${order.id}</td>
          <td>${order.customer.name}<br><small>${order.customer.phone}</small></td>
          <td>${formattedDate}</td>
          <td>${itemsCount} items</td>
          <td>Rs.${order.total.toFixed(2)}</td>
          <td><span class="status-badge status-${order.status || 'pending'}">${order.status || 'pending'}</span></td>
          <td class="action-buttons">
            <button class="view-order-btn" title="View Details" data-order-id="${order.id}"><i class="fas fa-eye"></i></button>
            ${order.status === 'pending' ? 
              `<button class="status-change-btn" data-order-id="${order.id}" data-status="processing" title="Mark as Processing"><i class="fas fa-clock"></i></button>` : ''}
            ${order.status === 'processing' ? 
              `<button class="status-change-btn" data-order-id="${order.id}" data-status="completed" title="Mark as Completed"><i class="fas fa-check"></i></button>` : ''}
            ${(order.status === 'pending' || order.status === 'processing') ? 
              `<button class="status-change-btn" data-order-id="${order.id}" data-status="cancelled" title="Cancel Order"><i class="fas fa-times"></i></button>` : ''}
          </td>
        `;
        
        ordersList.appendChild(row);
      });
    }
    
    // Filter orders by status
    function filterOrders(status) {
      const rows = document.querySelectorAll('#orders-list tr');
      
      rows.forEach(row => {
        if (status === 'all' || row.getAttribute('data-status') === status) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }
    
    // Search orders
    function searchOrders(query) {
      const rows = document.querySelectorAll('#orders-list tr');
      
      rows.forEach(row => {
        const orderId = row.querySelector('td:first-child').textContent.toLowerCase();
        const customerInfo = row.querySelector('td:nth-child(2)').textContent.toLowerCase();
        
        if (orderId.includes(query) || customerInfo.includes(query)) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }
    
    // Change order status
    function changeOrderStatus(orderId, newStatus) {
      // Get orders from local storage
      let orders = JSON.parse(localStorage.getItem('rasheedOrders') || '[]');
      
      // Find and update the order
      const orderIndex = orders.findIndex(order => order.id === orderId);
      if (orderIndex > -1) {
        const oldStatus = orders[orderIndex].status;
        orders[orderIndex].status = newStatus;
        
        // Save back to local storage
        localStorage.setItem('rasheedOrders', JSON.stringify(orders));
        
        // Update the UI
        const row = document.querySelector(`#orders-list tr[data-order-id="${orderId}"]`);
        if (row) {
          row.setAttribute('data-status', newStatus);
          
          // Update status badge
          const statusBadge = row.querySelector('.status-badge');
          if (statusBadge) {
            statusBadge.className = `status-badge status-${newStatus}`;
            statusBadge.textContent = newStatus;
          }
          
          // Update action buttons
          const actionCell = row.querySelector('.action-buttons');
          if (actionCell) {
            actionCell.innerHTML = `
              <button class="view-order-btn" title="View Details" data-order-id="${order.id}"><i class="fas fa-eye"></i></button>
              ${newStatus === 'pending' ? 
                `<button class="status-change-btn" data-order-id="${order.id}" data-status="processing" title="Mark as Processing"><i class="fas fa-clock"></i></button>` : ''}
              ${newStatus === 'processing' ? 
                `<button class="status-change-btn" data-order-id="${order.id}" data-status="completed" title="Mark as Completed"><i class="fas fa-check"></i></button>` : ''}
              ${(newStatus === 'pending' || newStatus === 'processing') ? 
                `<button class="status-change-btn" data-order-id="${order.id}" data-status="cancelled" title="Cancel Order"><i class="fas fa-times"></i></button>` : ''}
            `;
          }
        }
        
        // Update dashboard stats
        loadDashboardData();
        
        // Show success notification
        showStatusChangeNotification(orderId, oldStatus, newStatus);
      }
    }
    
    // Show status change notification
    function showStatusChangeNotification(orderId, oldStatus, newStatus) {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = 'status-change-notification';
      
      // Set icon based on new status
      let icon = '';
      let color = '';
      
      switch(newStatus) {
        case 'processing':
          icon = 'fa-clock';
          color = '#2196F3';
          break;
        case 'completed':
          icon = 'fa-check-circle';
          color = '#4CAF50';
          break;
        case 'cancelled':
          icon = 'fa-times-circle';
          color = '#F44336';
          break;
        default:
          icon = 'fa-info-circle';
          color = '#FF9800';
      }
      
      // Create notification content
      notification.innerHTML = `
        <div class="notification-icon" style="color: ${color}">
          <i class="fas ${icon}"></i>
        </div>
        <div class="notification-content">
          <div class="notification-title">Order Status Updated</div>
          <div class="notification-message">
            Order #${orderId} status changed from 
            <span class="status-badge status-${oldStatus}">${oldStatus || 'pending'}</span> to 
            <span class="status-badge status-${newStatus}">${newStatus}</span>
          </div>
        </div>
        <button class="notification-close">&times;</button>
      `;
      
      // Add CSS for notification
      const style = document.createElement('style');
      style.textContent = `
        .status-change-notification {
          position: fixed;
          top: 20px;
          right: 20px;
          background-color: white;
          border-radius: 8px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          padding: 15px;
          display: flex;
          align-items: center;
          gap: 15px;
          z-index: 5000;
          max-width: 400px;
          animation: slide-in 0.3s ease-out forwards;
        }
        
        @keyframes slide-in {
          from { transform: translateX(100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fade-out {
          from { transform: translateX(0); opacity: 1; }
          to { transform: translateX(100%); opacity: 0; }
        }
        
        .notification-icon {
          font-size: 1.8rem;
        }
        
        .notification-content {
          flex-grow: 1;
        }
        
        .notification-title {
          font-weight: 600;
          margin-bottom: 5px;
        }
        
        .notification-message {
          font-size: 0.9rem;
          color: #555;
        }
        
        .notification-close {
          background: none;
          border: none;
          font-size: 1.2rem;
          cursor: pointer;
          color: #777;
          padding: 0;
          margin-left: 10px;
        }
      `;
      document.head.appendChild(style);
      
      // Add to document
      document.body.appendChild(notification);
      
      // Add close button event
      const closeBtn = notification.querySelector('.notification-close');
      if (closeBtn) {
        closeBtn.addEventListener('click', function() {
          notification.style.animation = 'fade-out 0.3s ease-in forwards';
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 300);
        });
      }
      
      // Auto close after 5 seconds
      setTimeout(() => {
        if (document.body.contains(notification)) {
          notification.style.animation = 'fade-out 0.3s ease-in forwards';
          setTimeout(() => {
            if (document.body.contains(notification)) {
              document.body.removeChild(notification);
            }
          }, 300);
        }
      }, 5000);
    }
    
    // Export orders as CSV
    function exportOrdersAsCSV() {
      // Get orders from local storage
      const orders = JSON.parse(localStorage.getItem('rasheedOrders') || '[]');
      
      if (orders.length === 0) {
        alert('No orders to export');
        return;
      }
      
      // Create CSV header
      let csvContent = "Order ID,Customer Name,Phone,Address,Date,Items,Total,Status\n";
      
      // Add order data
      orders.forEach(order => {
        const date = new Date(order.date);
        const formattedDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;
        const itemsCount = order.items.reduce((total, item) => total + item.quantity, 0);
        
        // Format address for CSV (replace commas to avoid breaking CSV format)
        const address = order.customer.address ? order.customer.address.replace(/,/g, ' ') : '';
        
        // Create CSV row
        const row = [
          order.id,
          order.customer.name,
          order.customer.phone,
          address,
          formattedDate,
          `${itemsCount} items`,
          `Rs.${order.total.toFixed(2)}`,
          order.status || 'pending'
        ].join(',');
        
        csvContent += row + "\n";
      });
      
      // Create download link
      const encodedUri = encodeURI("data:text/csv;charset=utf-8," + csvContent);
      const link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      link.setAttribute("download", `rasheed-sons-orders-${new Date().toISOString().split('T')[0]}.csv`);
      document.body.appendChild(link);
      
      // Trigger download
      link.click();
      
      // Clean up
      document.body.removeChild(link);
    }
    
    // Populate products grid
    function populateProductsGrid(products) {
      const productsGrid = document.getElementById('products-grid');
      if (!productsGrid) return;
      
      productsGrid.innerHTML = '';
      
      products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-manage-card';
        productCard.innerHTML = `
          <img src="${product.image}" alt="${product.name}" class="product-manage-image">
          <div class="product-manage-info">
            <h4 class="product-manage-name">${product.name}</h4>
            <div class="product-manage-price">Rs.${product.price.toFixed(2)}</div>
            <div class="product-manage-category">Category: ${product.category}</div>
            <div class="product-manage-generic">${product.isGeneric ? '<span style="color: #00796b; font-weight: 600;"><i class="fas fa-check-circle"></i> Generic</span>' : '<span style="color: #777;"><i class="fas fa-times-circle"></i> Branded</span>'}</div>
            <div class="product-manage-actions">
              <button class="edit-product-btn" data-id="${product.id}"><i class="fas fa-edit"></i> Edit</button>
              <button class="delete-product-btn" data-id="${product.id}"><i class="fas fa-trash"></i> Delete</button>
            </div>
          </div>
        `;
        productsGrid.appendChild(productCard);
      });
      
      // Add event listeners to product action buttons
      productsGrid.querySelectorAll('.edit-product-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = parseInt(this.getAttribute('data-id'));
          openEditProductModal(productId);
        });
      });
      
      productsGrid.querySelectorAll('.delete-product-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = parseInt(this.getAttribute('data-id'));
          if (confirm(`Are you sure you want to delete this product?`)) {
            deleteProduct(productId);
          }
        });
      });
    }
    
    // Populate customers table
    function populateCustomersTable(orders) {
      const customersList = document.getElementById('customers-list');
      if (!customersList) return;
      
      customersList.innerHTML = '';
      
      if (orders.length === 0) {
        const emptyRow = document.createElement('tr');
        emptyRow.innerHTML = '<td colspan="5" style="text-align: center;">No customers found</td>';
        customersList.appendChild(emptyRow);
        return;
      }
      
      // Create a map of unique customers
      const customersMap = new Map();
      
      orders.forEach(order => {
        if (!order.customer || !order.customer.phone) return;
        
        const customer = order.customer;
        const phone = customer.phone;
        
        if (!customersMap.has(phone)) {
          customersMap.set(phone, {
            name: customer.name,
            phone: phone,
            address: customer.address || 'N/A',
            orders: 1,
            totalSpent: order.total
          });
        } else {
          const existingCustomer = customersMap.get(phone);
          existingCustomer.orders += 1;
          existingCustomer.totalSpent += order.total;
        }
      });
      
      // Convert to array and sort by total spent
      const customers = Array.from(customersMap.values());
      customers.sort((a, b) => b.totalSpent - a.totalSpent);
      
      customers.forEach(customer => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${customer.name}</td>
          <td>${customer.phone}</td>
          <td>${customer.address}</td>
          <td>${customer.orders}</td>
          <td>Rs.${customer.totalSpent.toFixed(2)}</td>
        `;
        
        customersList.appendChild(row);
      });
    }
    
    // Search customers
    function searchCustomers(query) {
      const rows = document.querySelectorAll('#customers-list tr');
      
      rows.forEach(row => {
        if (!row.querySelector('td:first-child')) return;
        
        const customerName = row.querySelector('td:first-child').textContent.toLowerCase();
        const customerPhone = row.querySelector('td:nth-child(2)').textContent.toLowerCase();
        const customerAddress = row.querySelector('td:nth-child(3)').textContent.toLowerCase();
        
        if (
          customerName.includes(query) || 
          customerPhone.includes(query) || 
          customerAddress.includes(query)
        ) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }
    
    // Populate top products table
    function populateTopProducts(orders) {
      const topProductsTable = document.getElementById('top-products');
      if (!topProductsTable) return;
      
      topProductsTable.innerHTML = '';
      
      if (orders.length === 0) {
        const emptyRow = document.createElement('tr');
        emptyRow.innerHTML = '<td colspan="3" style="text-align: center;">No sales data available</td>';
        topProductsTable.appendChild(emptyRow);
        return;
      }
      
      // Aggregate product sales
      const productSales = new Map();
      
      orders.forEach(order => {
        if (!order.items) return;
        
        order.items.forEach(item => {
          if (!productSales.has(item.id)) {
            productSales.set(item.id, {
              name: item.name,
              quantity: item.quantity,
              revenue: item.price * item.quantity
            });
          } else {
            const existingProduct = productSales.get(item.id);
            existingProduct.quantity += item.quantity;
            existingProduct.revenue += item.price * item.quantity;
          }
        });
      });
      
      // Convert to array and sort by revenue
      const topProducts = Array.from(productSales.values());
      topProducts.sort((a, b) => b.revenue - a.revenue);
      
      // Take top 5 or fewer
      const productsToShow = topProducts.slice(0, 5);
      
      productsToShow.forEach(product => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${product.name}</td>
          <td>${product.quantity}</td>
          <td>Rs.${product.revenue.toFixed(2)}</td>
        `;
        
        topProductsTable.appendChild(row);
      });
    }
    
    // Modify the existing populateProductsGrid function to handle product editing properly
    function populateProductsGrid(products) {
      const productsGrid = document.getElementById('products-grid');
      if (!productsGrid) return;
      
      productsGrid.innerHTML = '';
      
      products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-manage-card';
        productCard.innerHTML = `
          <img src="${product.image}" alt="${product.name}" class="product-manage-image">
          <div class="product-manage-info">
            <h4 class="product-manage-name">${product.name}</h4>
            <div class="product-manage-price">Rs.${product.price.toFixed(2)}</div>
            <div class="product-manage-category">Category: ${product.category}</div>
            <div class="product-manage-generic">${product.isGeneric ? '<span style="color: #00796b; font-weight: 600;"><i class="fas fa-check-circle"></i> Generic</span>' : '<span style="color: #777;"><i class="fas fa-times-circle"></i> Branded</span>'}</div>
            <div class="product-manage-actions">
              <button class="edit-product-btn" data-id="${product.id}"><i class="fas fa-edit"></i> Edit</button>
              <button class="delete-product-btn" data-id="${product.id}"><i class="fas fa-trash"></i> Delete</button>
            </div>
          </div>
        `;
        productsGrid.appendChild(productCard);
      });
      
      // Add event listeners to product action buttons
      productsGrid.querySelectorAll('.edit-product-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = parseInt(this.getAttribute('data-id'));
          openEditProductModal(productId);
        });
      });
      
      productsGrid.querySelectorAll('.delete-product-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const productId = parseInt(this.getAttribute('data-id'));
          if (confirm(`Are you sure you want to delete this product?`)) {
            deleteProduct(productId);
          }
        });
      });
    }
    
    // Replace the add product button event listener in the initSellerDashboard function
    // Add product button
    const addProductBtn = document.getElementById('add-product-btn');
    if (addProductBtn) {
      addProductBtn.addEventListener('click', function() {
        openAddProductModal();
      });
    }
    
    // Add these new functions after loadDashboardData()
    
    // Function to open add product modal
    function openAddProductModal() {
      const modal = document.getElementById('add-product-modal');
      if (!modal) return;
      
      // Reset form
      document.getElementById('add-product-form').reset();
      
      // Show modal
      modal.style.display = 'flex';
    }
    
    // Function to open edit product modal
    function openEditProductModal(productId) {
      const modal = document.getElementById('edit-product-modal');
      if (!modal) return;
      
      // Find product
      const product = products.find(p => p.id === productId);
      if (!product) return;
      
      // Populate form
      document.getElementById('edit-product-id').value = product.id;
      document.getElementById('edit-product-name').value = product.name;
      document.getElementById('edit-product-description').value = product.description;
      document.getElementById('edit-product-price').value = product.price;
      document.getElementById('edit-product-category').value = product.category;
      document.getElementById('edit-product-generic').checked = product.isGeneric || false;
      document.getElementById('edit-product-image').value = product.image;
      
      // Show modal
      modal.style.display = 'flex';
    }
    
    // Function to add a new product
    function addProduct(productData) {
      // Generate new ID (would be handled by server in real app)
      const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
      
      // Create new product object
      const newProduct = {
        id: newId,
        name: productData.name,
        description: productData.description,
        price: parseFloat(productData.price),
        category: productData.category,
        isGeneric: productData.isGeneric || false,
        image: productData.image
      };
      
      // Add to products array
      products.push(newProduct);
      
      // Save to localStorage (simulating server-side storage)
      localStorage.setItem('rasheedProducts', JSON.stringify(products));
      
      // Refresh products grid
      populateProductsGrid(products);
      
      // Close modal
      document.getElementById('add-product-modal').style.display = 'none';
      
      // Show success message
      alert('Product added successfully!');
    }
    
    // Function to update an existing product
    function updateProduct(productData) {
      const productId = parseInt(productData.id);
      
      // Find product index
      const productIndex = products.findIndex(p => p.id === productId);
      if (productIndex === -1) return;
      
      // Update product
      products[productIndex] = {
        ...products[productIndex],
        name: productData.name,
        description: productData.description,
        price: parseFloat(productData.price),
        category: productData.category,
        isGeneric: productData.isGeneric || false,
        image: productData.image
      };
      
      // Save to localStorage (simulating server-side storage)
      localStorage.setItem('rasheedProducts', JSON.stringify(products));
      
      // Refresh products grid
      populateProductsGrid(products);
      
      // Close modal
      document.getElementById('edit-product-modal').style.display = 'none';
      
      // Show success message
      alert('Product updated successfully!');
    }
    
    // Function to delete a product
    function deleteProduct(productId) {
      // Find product index
      const productIndex = products.findIndex(p => p.id === productId);
      if (productIndex === -1) return;
      
      // Remove product
      products.splice(productIndex, 1);
      
      // Save to localStorage (simulating server-side storage)
      localStorage.setItem('rasheedProducts', JSON.stringify(products));
      
      // Refresh products grid
      populateProductsGrid(products);
      
      // Show success message
      alert('Product deleted successfully!');
    }
    
    // Function to initialize product management
    function initProductManagement() {
      // Load products from localStorage if available
      const savedProducts = localStorage.getItem('rasheedProducts');
      if (savedProducts) {
        // Update the global products array
        const parsedProducts = JSON.parse(savedProducts);
        if (Array.isArray(parsedProducts) && parsedProducts.length > 0) {
          // Replace the global products array with saved products
          products.splice(0, products.length, ...parsedProducts);
        }
      }
      
      // Add product form submission
      const addProductForm = document.getElementById('add-product-form');
      if (addProductForm) {
        addProductForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const productData = {
            name: document.getElementById('new-product-name').value,
            description: document.getElementById('new-product-description').value,
            price: document.getElementById('new-product-price').value,
            category: document.getElementById('new-product-category').value,
            isGeneric: document.getElementById('new-product-generic').checked,
            image: document.getElementById('new-product-image').value
          };
          
          addProduct(productData);
        });
      }
      
      // Edit product form submission
      const editProductForm = document.getElementById('edit-product-form');
      if (editProductForm) {
        editProductForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const productData = {
            id: document.getElementById('edit-product-id').value,
            name: document.getElementById('edit-product-name').value,
            description: document.getElementById('edit-product-description').value,
            price: document.getElementById('edit-product-price').value,
            category: document.getElementById('edit-product-category').value,
            isGeneric: document.getElementById('edit-product-generic').checked,
            image: document.getElementById('edit-product-image').value
          };
          
          updateProduct(productData);
        });
      }
      
      // Close add product modal
      const closeAddProductModal = document.getElementById('close-add-product-modal');
      if (closeAddProductModal) {
        closeAddProductModal.addEventListener('click', function() {
          document.getElementById('add-product-modal').style.display = 'none';
        });
      }
      
      // Close edit product modal
      const closeEditProductModal = document.getElementById('close-edit-product-modal');
      if (closeEditProductModal) {
        closeEditProductModal.addEventListener('click', function() {
          document.getElementById('edit-product-modal').style.display = 'none';
        });
      }
      
      // Close modals when clicking outside
      window.addEventListener('click', function(e) {
        const addProductModal = document.getElementById('add-product-modal');
        const editProductModal = document.getElementById('edit-product-modal');
        
        if (e.target === addProductModal) {
          addProductModal.style.display = 'none';
        } else if (e.target === editProductModal) {
          editProductModal.style.display = 'none';
        }
      });
    }

    // Add this to the initProductManagement function or create a new function
    function initContactSettings() {
      // Load contact information
      loadContactInfo();
      
      // Save contact information
      const saveContactBtn = document.getElementById('save-contact-btn');
      if (saveContactBtn) {
        saveContactBtn.addEventListener('click', function() {
          // Get values from form
          const contactInfo = {
            email: document.getElementById('contact-email').value,
            phone: document.getElementById('contact-phone').value,
            address: document.getElementById('contact-address').value,
            hours: document.getElementById('contact-hours').value,
            whatsapp: document.getElementById('contact-whatsapp').value,
            additional: document.getElementById('contact-additional').value
          };
          
          // Save to localStorage
          localStorage.setItem('rasheedContactInfo', JSON.stringify(contactInfo));
          
          // Update contact section on main page
          updateContactSection(contactInfo);
          
          // Show success message
          alert('Contact information updated successfully!');
        });
      }
      
      // Save store settings
      const saveStoreSettingsBtn = document.getElementById('save-store-settings-btn');
      if (saveStoreSettingsBtn) {
        saveStoreSettingsBtn.addEventListener('click', function() {
          // Get values from form
          const storeInfo = {
            name: document.getElementById('store-name').value,
            email: document.getElementById('store-email').value,
            phone: document.getElementById('store-phone').value,
            address: document.getElementById('store-address').value,
            deliveryFee: document.getElementById('delivery-fee').value,
            freeDeliveryThreshold: document.getElementById('free-delivery-threshold').value
          };
          
          // Save to localStorage
          localStorage.setItem('rasheedStoreInfo', JSON.stringify(storeInfo));
          
          // Show success message
          alert('Store settings updated successfully!');
        });
      }
    }
    
    // Function to load contact information
    function loadContactInfo() {
      // Get contact info from localStorage or use defaults
      let contactInfo;
      const savedContactInfo = localStorage.getItem('rasheedContactInfo');
      
      if (savedContactInfo) {
        contactInfo = JSON.parse(savedContactInfo);
        
        // Update form fields if they exist
        if (document.getElementById('contact-email')) {
          document.getElementById('contact-email').value = contactInfo.email || '';
          document.getElementById('contact-phone').value = contactInfo.phone || '';
          document.getElementById('contact-address').value = contactInfo.address || '';
          document.getElementById('contact-hours').value = contactInfo.hours || '';
          document.getElementById('contact-whatsapp').value = contactInfo.whatsapp || '';
          document.getElementById('contact-additional').value = contactInfo.additional || '';
        }
      } else {
        // Default contact info
        contactInfo = {
          email: 'rasheedsonsemed@gmail.com',
          phone: '+92 307 2750177',
          address: '123 Health St, Medicity, Pakistan',
          hours: 'Mon-Sat: 9am - 9pm, Sun: 10am - 6pm',
          whatsapp: '+92 307 2750177',
          additional: 'Need assistance with your medication? Our pharmacists are available for consultation.'
        };
        
        // Save default to localStorage
        localStorage.setItem('rasheedContactInfo', JSON.stringify(contactInfo));
      }
      
      // Update contact section on main page
      updateContactSection(contactInfo);
    }
    
    // Function to update contact section on main page
    function updateContactSection(contactInfo) {
      const contactContainer = document.getElementById('contact-info-container');
      if (!contactContainer) return;
      
      contactContainer.innerHTML = `
        <ul class="contact-info-list">
          <li><i class="fas fa-envelope"></i> Email: <a href="mailto:${contactInfo.email}">${contactInfo.email}</a></li>
          <li><i class="fas fa-phone-alt"></i> Phone: <a href="tel:${contactInfo.phone}">${contactInfo.phone}</a></li>
          <li><i class="fas fa-map-marker-alt"></i> Address: ${contactInfo.address}</li>
          <li><i class="fas fa-clock"></i> Hours: ${contactInfo.hours}</li>
          ${contactInfo.whatsapp ? `<li><i class="fab fa-whatsapp"></i> WhatsApp: <a href="https://wa.me/${contactInfo.whatsapp.replace(/\D/g,'')}">${contactInfo.whatsapp}</a></li>` : ''}
        </ul>
        ${contactInfo.additional ? `<div class="additional-contact-info">${contactInfo.additional}</div>` : ''}
      `;
    }
    
    // Call the function when the page loads
    document.addEventListener('DOMContentLoaded', function() {
      init();
      initProductManagement();
      initContactSettings(); // Add this line
    });
    
    // Add CSS for contact info list
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      .contact-info-list {
        list-style: none;
        padding: 0;
        margin: 1.5rem 0;
      }
      
      .contact-info-list li {
        margin-bottom: 0.8rem;
        display: flex;
        align-items: flex-start;
        gap: 0.8rem;
        font-size: 1.1rem;
      }
      
      .contact-info-list li i {
        color: #00796b;
        font-size: 1.2rem;
        width: 20px;
        text-align: center;
        margin-top: 4px;
      }
      
      .additional-contact-info {
        margin-top: 1.5rem;
        padding: 1rem;
        background-color: #e0f2f1;
        border-radius: 8px;
        border-left: 4px solid #00796b;
      }
    `;
    document.head.appendChild(styleElement);

    // Add this to handle the feedback form submission
    function initFeedbackSystem() {
      const feedbackForm = document.getElementById('feedback-form');
      const feedbackSuccess = document.getElementById('feedback-success');
      const sendAnotherBtn = document.getElementById('send-another-btn');
      const feedbackToggleBtn = document.getElementById('feedback-toggle-btn');
      const feedbackPanel = document.getElementById('feedback-panel');
      const closeFeedbackPanel = document.getElementById('close-feedback-panel');
      
      // Feedback panel toggle
      if (feedbackToggleBtn) {
        feedbackToggleBtn.addEventListener('click', function() {
          if (feedbackPanel.style.right === '0px') {
            feedbackPanel.style.right = '-400px';
          } else {
            feedbackPanel.style.right = '0px';
          }
        });
      }
      
      // Close feedback panel
      if (closeFeedbackPanel) {
        closeFeedbackPanel.addEventListener('click', function() {
          feedbackPanel.style.right = '-400px';
        });
      }
      
      if (feedbackForm) {
        feedbackForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Create feedback object
          const feedback = {
            id: 'FB' + Date.now(),
            name: document.getElementById('feedback-name').value,
            email: document.getElementById('feedback-email').value,
            phone: document.getElementById('feedback-phone').value || 'Not provided',
            type: document.getElementById('feedback-type').value,
            subject: document.getElementById('feedback-subject').value,
            message: document.getElementById('feedback-message').value,
            date: new Date().toISOString(),
            status: 'unread'
          };
          
          // Save feedback to localStorage
          let feedbackList = JSON.parse(localStorage.getItem('rasheedFeedback') || '[]');
          feedbackList.push(feedback);
          localStorage.setItem('rasheedFeedback', JSON.stringify(feedbackList));
          
          // Show success message
          feedbackForm.style.display = 'none';
          feedbackSuccess.style.display = 'block';
          
          // Reset form
          feedbackForm.reset();
        });
      }
      
      // Send another message button
      if (sendAnotherBtn) {
        sendAnotherBtn.addEventListener('click', function() {
          feedbackForm.style.display = 'block';
          feedbackSuccess.style.display = 'none';
        });
      }
      
      // Initialize feedback admin functions if dashboard exists
      initFeedbackAdmin();
    }
    
    // Initialize feedback admin functionality
    function initFeedbackAdmin() {
      // Load feedback into admin dashboard
      loadFeedbackData();
      
      // Filter feedback
      const feedbackFilter = document.getElementById('feedback-filter');
      if (feedbackFilter) {
        feedbackFilter.addEventListener('change', function() {
          const filterValue = this.value;
          filterFeedback(filterValue);
        });
      }
      
      // Search feedback
      const feedbackSearch = document.getElementById('feedback-search');
      if (feedbackSearch) {
        feedbackSearch.addEventListener('input', function() {
          const query = this.value.trim().toLowerCase();
          searchFeedback(query);
        });
      }
      
      // Export feedback
      const exportFeedbackBtn = document.getElementById('export-feedback-btn');
      if (exportFeedbackBtn) {
        exportFeedbackBtn.addEventListener('click', function() {
          exportFeedbackAsCSV();
        });
      }
      
      // Handle closing feedback modal
      const closeFeedbackModal = document.getElementById('close-feedback-modal');
      if (closeFeedbackModal) {
        closeFeedbackModal.addEventListener('click', function() {
          document.getElementById('view-feedback-modal').style.display = 'none';
        });
      }
      
      // Handle marking feedback as read
      const markReadBtn = document.getElementById('mark-read-btn');
      if (markReadBtn) {
        markReadBtn.addEventListener('click', function() {
          const feedbackId = this.getAttribute('data-id');
          markFeedbackAsRead(feedbackId);
        });
      }
      
      // Handle deleting feedback
      const deleteFeedbackBtn = document.getElementById('delete-feedback-btn');
      if (deleteFeedbackBtn) {
        deleteFeedbackBtn.addEventListener('click', function() {
          const feedbackId = this.getAttribute('data-id');
          if (confirm('Are you sure you want to delete this message?')) {
            deleteFeedback(feedbackId);
          }
        });
      }
      
      // Close modal when clicking outside
      window.addEventListener('click', function(e) {
        const feedbackModal = document.getElementById('view-feedback-modal');
        if (e.target === feedbackModal) {
          feedbackModal.style.display = 'none';
        }
      });
    }
    
    // Function to load feedback data into admin dashboard
    function loadFeedbackData() {
      const feedbackList = document.getElementById('feedback-list');
      if (!feedbackList) return;
      
      // Get feedback from localStorage
      const feedback = JSON.parse(localStorage.getItem('rasheedFeedback') || '[]');
      
      feedbackList.innerHTML = '';
      
      if (feedback.length === 0) {
        const emptyRow = document.createElement('tr');
        emptyRow.innerHTML = '<td colspan="6" style="text-align: center;">No feedback or queries found</td>';
        feedbackList.appendChild(emptyRow);
        return;
      }
      
      // Sort feedback by date, newest first
      feedback.sort((a, b) => new Date(b.date) - new Date(a.date));
      
      feedback.forEach(item => {
        const row = document.createElement('tr');
        row.setAttribute('data-id', item.id);
        row.setAttribute('data-type', item.type);
        row.setAttribute('data-status', item.status);
        
        const date = new Date(item.date);
        const formattedDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;
        
        row.innerHTML = `
          <td>${formattedDate}</td>
          <td>${item.name}</td>
          <td><span class="type-badge type-${item.type}">${capitalize(item.type)}</span></td>
          <td>${item.subject}</td>
          <td><span class="status-badge status-${item.status}">${item.status}</span></td>
          <td>
            <button class="view-feedback-btn" data-id="${item.id}"><i class="fas fa-eye"></i> View</button>
          </td>
        `;
        
        feedbackList.appendChild(row);
      });
      
      // Add event listeners to view buttons
      feedbackList.querySelectorAll('.view-feedback-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const feedbackId = this.getAttribute('data-id');
          openFeedbackDetails(feedbackId);
        });
      });
      
      // Update unread count in menu
      updateUnreadCount();
    }
    
    // Function to open feedback details
    function openFeedbackDetails(feedbackId) {
      // Get feedback from localStorage
      const feedbackList = JSON.parse(localStorage.getItem('rasheedFeedback') || '[]');
      const feedback = feedbackList.find(item => item.id === feedbackId);
      
      if (!feedback) return;
      
      // Populate modal with feedback details
      const detailsContainer = document.getElementById('feedback-details');
      const date = new Date(feedback.date);
      const formattedDate = `${date.toLocaleDateString()} at ${date.toLocaleTimeString()}`;
      
      detailsContainer.innerHTML = `
        <div style="margin-bottom: 1.5rem;">
          <span class="type-badge type-${feedback.type}" style="display: inline-block; margin-bottom: 0.5rem;">${capitalize(feedback.type)}</span>
          <h4 style="margin: 0.5rem 0; font-size: 1.2rem;">${feedback.subject}</h4>
          <div style="color: #777; font-size: 0.9rem;">From: ${feedback.name} • ${formattedDate}</div>
        </div>
        
        <div style="margin-bottom: 1.5rem;">
          <div style="background-color: #f9f9f9; padding: 1rem; border-radius: 4px; margin-bottom: 1rem; white-space: pre-wrap;">${feedback.message}</div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div>
            <strong>Email:</strong><br>
            <a href="mailto:${feedback.email}" style="color: #00796b;">${feedback.email}</a>
          </div>
          <div>
            <strong>Phone:</strong><br>
            ${feedback.phone}
          </div>
        </div>
      `;
      
      // Set data-id for action buttons
      document.getElementById('mark-read-btn').setAttribute('data-id', feedbackId);
      document.getElementById('delete-feedback-btn').setAttribute('data-id', feedbackId);
      
      // Update button text based on read status
      if (feedback.status === 'read') {
        document.getElementById('mark-read-btn').textContent = 'Mark as Unread';
      } else {
        document.getElementById('mark-read-btn').textContent = 'Mark as Read';
      }
      
      // Show modal
      document.getElementById('view-feedback-modal').style.display = 'flex';
    }
    
    // Function to mark feedback as read/unread
    function markFeedbackAsRead(feedbackId) {
      // Get feedback from localStorage
      let feedbackList = JSON.parse(localStorage.getItem('rasheedFeedback') || '[]');
      const index = feedbackList.findIndex(item => item.id === feedbackId);
      
      if (index === -1) return;
      
      // Toggle status
      feedbackList[index].status = feedbackList[index].status === 'read' ? 'unread' : 'read';
      
      // Save back to localStorage
      localStorage.setItem('rasheedFeedback', JSON.stringify(feedbackList));
      
      // Update button text
      const button = document.getElementById('mark-read-btn');
      if (feedbackList[index].status === 'read') {
        button.textContent = 'Mark as Unread';
      } else {
        button.textContent = 'Mark as Read';
      }
      
      // Update feedback table
      loadFeedbackData();
    }
    
    // Function to delete feedback
    function deleteFeedback(feedbackId) {
      // Get feedback from localStorage
      let feedbackList = JSON.parse(localStorage.getItem('rasheedFeedback') || '[]');
      const filteredList = feedbackList.filter(item => item.id !== feedbackId);
      
      // Save back to localStorage
      localStorage.setItem('rasheedFeedback', JSON.stringify(filteredList));
      
      // Close modal
      document.getElementById('view-feedback-modal').style.display = 'none';
      
      // Update feedback table
      loadFeedbackData();
    }
    
    // Function to filter feedback
    function filterFeedback(filterValue) {
      const rows = document.querySelectorAll('#feedback-list tr');
      
      rows.forEach(row => {
        if (filterValue === 'all' || 
            row.getAttribute('data-type') === filterValue || 
            row.getAttribute('data-status') === filterValue) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }
    
    // Function to search feedback
    function searchFeedback(query) {
      const rows = document.querySelectorAll('#feedback-list tr');
      
      rows.forEach(row => {
        const name = row.querySelector('td:nth-child(2)').textContent.toLowerCase();
        const subject = row.querySelector('td:nth-child(4)').textContent.toLowerCase();
        
        if (name.includes(query) || subject.includes(query)) {
          row.style.display = '';
        } else {
          row.style.display = 'none';
        }
      });
    }
    
    // Function to export feedback as CSV
    function exportFeedbackAsCSV() {
      // Get feedback from localStorage
      const feedback = JSON.parse(localStorage.getItem('rasheedFeedback') || '[]');
      
      if (feedback.length === 0) {
        alert('No feedback to export');
        return;
      }
      
      // Create CSV header
      let csvContent = "ID,Date,Name,Email,Phone,Type,Subject,Message,Status\n";
      
      // Add feedback data
      feedback.forEach(item => {
        const date = new Date(item.date).toLocaleDateString();
        
        // Format message for CSV (replace commas and quotes)
        const message = item.message.replace(/"/g, '""').replace(/\n/g, ' ');
        const subject = item.subject.replace(/"/g, '""');
        
        // Create CSV row
        const row = [
          item.id,
          date,
          item.name,
          item.email,
          item.phone,
          item.type,
          `"${subject}"`,
          `"${message}"`,
          item.status
        ].join(',');
        
        csvContent += row + "\n";
      });
      
      // Create download link
      const encodedUri = encodeURI("data:text/csv;charset=utf-8," + csvContent);
      const link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      link.setAttribute("download", `rasheed-sons-feedback-${new Date().toISOString().split('T')[0]}.csv`);
      document.body.appendChild(link);
      
      // Trigger download
      link.click();
      
      // Clean up
      document.body.removeChild(link);
    }
    
    // Function to update unread count
    function updateUnreadCount() {
      // Get feedback from localStorage
      const feedback = JSON.parse(localStorage.getItem('rasheedFeedback') || '[]');
      const unreadCount = feedback.filter(item => item.status === 'unread').length;
      
      // Update menu item
      const menuItem = document.querySelector('.dashboard-menu li[data-tab="feedback-tab"]');
      if (menuItem && unreadCount > 0) {
        // Check if badge already exists
        let badge = menuItem.querySelector('.unread-badge');
        if (!badge) {
          badge = document.createElement('span');
          badge.className = 'unread-badge';
          menuItem.appendChild(badge);
        }
        badge.textContent = unreadCount;
      } else if (menuItem) {
        const badge = menuItem.querySelector('.unread-badge');
        if (badge) {
          menuItem.removeChild(badge);
        }
      }
    }
    
    // Helper function to capitalize first letter
    function capitalize(str) {
      return str.charAt(0).toUpperCase() + str.slice(1);
    }

    // Function to view order details
    function viewOrderDetails(orderId) {
      // Show loading indicator first
      showLoadingIndicator();
      
      // Use setTimeout to allow the loading indicator to render
      setTimeout(() => {
      // Get orders from local storage
      const orders = JSON.parse(localStorage.getItem('rasheedOrders') || '[]');
      
      // Find the order
        const order = orders.find(order => order.id === orderId);
      if (!order) {
          hideLoadingIndicator();
        return;
      }
      
        // Calculate items subtotal
        const itemsSubtotal = order.items.reduce((total, item) => {
          return total + (parseFloat(item.price) * parseInt(item.quantity));
        }, 0);
      
      // Format date
      const date = new Date(order.date);
        const formattedDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;
      
        // Create modal content first before adding to DOM
        const modalContent = document.createElement('div');
        modalContent.className = 'order-details-content';
      
        // Set inner HTML in one operation - without items yet (will be loaded later)
        modalContent.innerHTML = `
          <button class="close-order-details">&times;</button>
          <h3>Order Details</h3>
          <div id="order-items-container">
            <div class="items-loading">
              <div class="items-loading-spinner"></div>
              <p>Loading order items...</p>
            </div>
          </div>
          
          <div class="order-actions">
            <button class="print-order-btn"><i class="fas fa-print"></i> Print</button>
            ${order.status === 'pending' ? 
              `<button class="status-change-btn" data-order-id="${order.id}" data-status="processing"><i class="fas fa-clock"></i> Mark Processing</button>` : ''}
            ${order.status === 'processing' ? 
              `<button class="status-change-btn" data-order-id="${order.id}" data-status="completed"><i class="fas fa-check"></i> Mark Completed</button>` : ''}
            ${(order.status === 'pending' || order.status === 'processing') ? 
              `<button class="status-change-btn" data-order-id="${order.id}" data-status="cancelled"><i class="fas fa-times"></i> Cancel Order</button>` : ''}
        </div>
      `;
      
        // Create modal container
        const modal = document.createElement('div');
        modal.className = 'order-details-modal';
        
        // Add content to modal
        modal.appendChild(modalContent);
        
        // Remove any existing modals before adding new one
        const existingModal = document.querySelector('.order-details-modal');
        if (existingModal) {
          document.body.removeChild(existingModal);
        }
        
        // Hide loading indicator
        hideLoadingIndicator();
        
        // Add modal to document body
        document.body.appendChild(modal);
        
        // Force browser reflow to ensure CSS transitions work properly
        void modal.offsetWidth;
        
        // Show modal with animation
        setTimeout(() => {
          modal.classList.add('visible');
          
          // Load order items after modal is visible
          setTimeout(() => {
            loadOrderItems(order, itemsSubtotal, modal);
          }, 300);
        }, 10);
      
      // Add event listeners
      const closeBtn = modal.querySelector('.close-order-details');
      closeBtn.addEventListener('click', function() {
          closeOrderDetailsModal(modal);
      });
      
      // Close when clicking outside
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
            closeOrderDetailsModal(modal);
        }
      });
      
      // Add escape key listener for this specific modal
      const escapeListener = function(e) {
        if (e.key === 'Escape') {
          closeOrderDetailsModal(modal);
          // Remove this specific listener when modal is closed
          document.removeEventListener('keydown', escapeListener);
        }
      };
      document.addEventListener('keydown', escapeListener);
      
      // Print button
      const printBtn = modal.querySelector('.print-order-btn');
      if (printBtn) {
        printBtn.addEventListener('click', function() {
          window.print();
        });
      }
      
      // Status change buttons
      const statusBtns = modal.querySelectorAll('.status-change-btn');
      statusBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const orderId = this.getAttribute('data-order-id');
          const newStatus = this.getAttribute('data-status');
          
          // Change status
          changeOrderStatus(orderId, newStatus);
          
            // Update the status badge in the modal
            const statusBadge = modal.querySelector('.status-badge');
            if (statusBadge) {
              statusBadge.className = `status-badge status-${newStatus}`;
              statusBadge.textContent = newStatus;
            }
            
            // Update the action buttons in the modal
            const actionsDiv = modal.querySelector('.order-actions');
            if (actionsDiv) {
              updateModalActionButtons(actionsDiv, orderId, newStatus);
            }
          });
        });
      }, 10); // Small timeout to allow loading indicator to render
    }

    // Function to load order items after modal is visible
    function loadOrderItems(order, itemsSubtotal, modal) {
      // Create items HTML
      const itemsHtml = order.items.map(item => `
        <tr>
          <td>${item.name}</td>
          <td>${item.quantity}</td>
          <td>Rs.${parseFloat(item.price).toFixed(2)}</td>
          <td>Rs.${(parseFloat(item.price) * parseInt(item.quantity)).toFixed(2)}</td>
        </tr>
      `).join('');
      
      // Format date for receipt
      const date = new Date(order.date);
      const formattedDate = `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;
      const formattedTime = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
      
      // Create receipt HTML with improved structure
      const receiptHtml = `
        <div class="receipt-container">
          <div class="receipt-header">
            <div class="receipt-logo">
              <i class="fas fa-pills receipt-logo-icon"></i>
              <div class="receipt-brand">
                <h2>Rasheed Pharmacy</h2>
                <p>Your Health, Our Priority</p>
              </div>
            </div>
            <div class="receipt-info">
              <p><strong>Receipt #:</strong> ${order.id.substring(0, 8).toUpperCase()}</p>
              <p><strong>Date:</strong> ${formattedDate}</p>
              <p><strong>Time:</strong> ${formattedTime}</p>
            </div>
          </div>
          
          <div class="receipt-customer-details">
            <div class="receipt-section-title">Customer Information</div>
            <div class="receipt-customer-content">
              <div>
                <p><strong>Name:</strong> ${order.customer.name}</p>
                <p><strong>Phone:</strong> ${order.customer.phone}</p>
              </div>
              <div>
                <p><strong>Address:</strong> ${order.customer.address}</p>
                <p><strong>Status:</strong> <span class="status-badge status-${order.status || 'pending'}">${order.status || 'pending'}</span></p>
              </div>
            </div>
          </div>
          
          <div class="receipt-items">
            <div class="receipt-section-title">Order Items</div>
            <table class="order-items-table">
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Quantity</th>
                  <th>Unit Price</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                ${itemsHtml}
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="3" class="text-right"><strong>Items Subtotal:</strong></td>
                  <td>Rs.${itemsSubtotal.toFixed(2)}</td>
                </tr>
                <tr>
                  <td colspan="3" class="text-right"><strong>Delivery Charge:</strong></td>
                  <td>Rs.${(order.deliveryCharge || 0).toFixed(2)}</td>
                </tr>
                <tr class="order-total">
                  <td colspan="3" class="text-right"><strong>Total Amount:</strong></td>
                  <td>Rs.${order.total.toFixed(2)}</td>
                </tr>
              </tfoot>
            </table>
          </div>
          
          <div class="receipt-footer">
            <p>Thank you for your order!</p>
            <p class="receipt-policy">Return Policy: Medicines cannot be returned once sold. Please check your order before leaving.</p>
            <p class="receipt-contact">For any inquiries, please contact us at: <strong>info@rasheedpharmacy.com</strong></p>
          </div>
        </div>
      `;
      
      // Find the container and replace loading indicator with receipt
      const container = modal.querySelector('#order-items-container');
      if (container) {
        // Create a temporary div to hold the receipt (for smoother rendering)
        const tempDiv = document.createElement('div');
        tempDiv.style.opacity = '0';
        tempDiv.style.transition = 'opacity 0.3s ease';
        tempDiv.innerHTML = receiptHtml;
        
        // Replace loading indicator with receipt
        container.innerHTML = '';
        container.appendChild(tempDiv);
        
        // Force reflow and fade in
        void tempDiv.offsetWidth;
        tempDiv.style.opacity = '1';
      }
    }

    // Helper function to show loading indicator
    function showLoadingIndicator() {
      // Check if loading overlay already exists
      if (document.querySelector('.loading-overlay')) return;
      
      // Create loading overlay
      const loadingOverlay = document.createElement('div');
      loadingOverlay.className = 'loading-overlay';
      loadingOverlay.innerHTML = '<div class="loading-spinner"></div>';
      
      // Add to document
      document.body.appendChild(loadingOverlay);
    }

    // Helper function to hide loading indicator
    function hideLoadingIndicator() {
      const loadingOverlay = document.querySelector('.loading-overlay');
      if (loadingOverlay) {
        document.body.removeChild(loadingOverlay);
      }
    }

    // Helper function to close order details modal with animation
    function closeOrderDetailsModal(modal) {
      // Remove visible class to trigger transition
      modal.classList.remove('visible');
      
      // Remove after animation completes
      setTimeout(() => {
        if (document.body.contains(modal)) {
          document.body.removeChild(modal);
        }
      }, 300);
    }

    // Helper function to update action buttons in the modal
    function updateModalActionButtons(container, orderId, status) {
      container.innerHTML = `
        <button class="print-order-btn"><i class="fas fa-print"></i> Print</button>
        ${status === 'pending' ? 
          `<button class="status-change-btn" data-order-id="${orderId}" data-status="processing"><i class="fas fa-clock"></i> Mark Processing</button>` : ''}
        ${status === 'processing' ? 
          `<button class="status-change-btn" data-order-id="${orderId}" data-status="completed"><i class="fas fa-check"></i> Mark Completed</button>` : ''}
        ${(status === 'pending' || status === 'processing') ? 
          `<button class="status-change-btn" data-order-id="${orderId}" data-status="cancelled"><i class="fas fa-times"></i> Cancel Order</button>` : ''}
      `;
      
      // Add event listeners to new buttons
      const printBtn = container.querySelector('.print-order-btn');
      if (printBtn) {
        printBtn.addEventListener('click', function() {
          window.print();
        });
      }
      
      const statusBtns = container.querySelectorAll('.status-change-btn');
      statusBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const orderId = this.getAttribute('data-order-id');
          const newStatus = this.getAttribute('data-status');
          
          // Change status
          changeOrderStatus(orderId, newStatus);
          
          // Update the status badge in the modal
          const modal = container.closest('.order-details-modal');
          if (modal) {
            const statusBadge = modal.querySelector('.status-badge');
            if (statusBadge) {
              statusBadge.className = `status-badge status-${newStatus}`;
              statusBadge.textContent = newStatus;
            }
            
            // Update the action buttons in the modal again
            updateModalActionButtons(container, orderId, newStatus);
          }
        });
      });
    }
  </script>

  <!-- Floating Feedback Button & Form -->
  <div id="feedback-widget" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
    <button id="feedback-toggle-btn" style="background-color: #00796b; color: white; border: none; border-radius: 50%; width: 60px; height: 60px; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;">
      <i class="fas fa-comment-alt"></i>
    </button>
  </div>

  <!-- Feedback Slide-in Panel -->
  <div id="feedback-panel" style="position: fixed; bottom: 0; right: -400px; width: 370px; background-color: white; border-radius: 8px 0 0 0; box-shadow: -5px 0 15px rgba(0,0,0,0.2); transition: right 0.3s ease; z-index: 999; max-height: 90vh; display: flex; flex-direction: column;">
    <div style="padding: 1rem; background-color: #00796b; color: white; border-radius: 8px 0 0 0; display: flex; justify-content: space-between; align-items: center;">
      <h3 style="margin: 0; font-size: 1.2rem;">Feedback & Queries</h3>
      <button id="close-feedback-panel" style="background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer;">&times;</button>
    </div>
    
    <div style="overflow-y: auto; padding: 1rem; flex-grow: 1;">
      <form id="feedback-form" class="feedback-form" style="background-color: transparent; box-shadow: none; padding: 0;">
        <div class="form-group">
          <label for="feedback-name">Your Name</label>
          <input type="text" id="feedback-name" required>
        </div>
        <div class="form-group">
          <label for="feedback-email">Email Address</label>
          <input type="email" id="feedback-email" required>
        </div>
        <div class="form-group">
          <label for="feedback-phone">Phone Number (optional)</label>
          <input type="tel" id="feedback-phone">
        </div>
        <div class="form-group">
          <label for="feedback-type">Type of Message</label>
          <select id="feedback-type" required>
            <option value="">Select an option</option>
            <option value="query">General Question</option>
            <option value="feedback">Feedback</option>
            <option value="complaint">Complaint</option>
            <option value="suggestion">Suggestion</option>
          </select>
        </div>
        <div class="form-group">
          <label for="feedback-subject">Subject</label>
          <input type="text" id="feedback-subject" required>
        </div>
        <div class="form-group">
          <label for="feedback-message">Your Message</label>
          <textarea id="feedback-message" rows="4" required></textarea>
        </div>
        <button type="submit" class="feedback-submit-btn" style="background-color: #00796b; color: white; border: none; padding: 0.75rem 1.5rem; font-size: 1rem; border-radius: 4px; cursor: pointer; font-weight: 600; margin-top: 1rem; width: 100%;">Submit Message</button>
      </form>
      
      <!-- Success message will be displayed after form submission -->
      <div id="feedback-success" style="display: none; text-align: center;">
        <div style="font-size: 3rem; color: #4CAF50; margin: 1rem 0;"><i class="fas fa-check-circle"></i></div>
        <h3 style="margin-top: 0; color: #2E7D32;">Thank You!</h3>
        <p>We have received your message and will get back to you soon.</p>
        <button id="send-another-btn" style="background-color: #00796b; color: white; border: none; padding: 0.6rem 1rem; font-size: 0.9rem; border-radius: 4px; cursor: pointer; margin-top: 1rem; width: 100%;">Send Another Message</button>
      </div>
    </div>
  </div>
</body>
</html>